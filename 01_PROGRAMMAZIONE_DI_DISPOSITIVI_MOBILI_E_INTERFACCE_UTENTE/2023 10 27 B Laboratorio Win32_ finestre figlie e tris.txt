no quello no è tutto è tutto rigorosamente in punti per cui è tutto quindi questa è la domanda appunto era se si possono specificare in altre dimensioni tipo percentuali proporzioni e quant'altro no è tutto pixel e basta quindi adesso qui ho risolto la cosa che non ci va a fare prima per la mancanza di caffeina quindi ho definito queste min max così molto approssimative quindi il codice che si dà ad aiutarmi e poi nel definire le dimensioni della posizione dimensioni del nostro pulsante possiamo possiamo fare delle piccole degli aggiustamenti in base alla dimensione dello schermo però ecco nulla di particolarmente sofisticato è chiaro che se abbiamo il tempo e la voglia di farlo possiamo fare anche cose molto complesse però è tutto in mano nostro perché non c'è nessun nessun aiuto per cui c'è molto tutto quanto se tutta le dimensioni si esatto qualsiasi cosa che riguarda la dimensione su schermo è tutto è tutto statico quindi sono tutti i pixel pc che lavoriamo e a e win 32 non ci aiuta in alcun modo questo che chiaramente viene da un mondo in cui tutte queste cose non servivano comunque nel minuto 3.11 lo schermo era forse neanche 640 480 comunque era quello e sapevi esattamente dove andavano i pulsanti perché rimanevano fissi in genere adesso invece lavoriamo con un mondo in cui il numero di pixel è molto variabile e anche le dimensioni dello schermo sono estremamente variabili si passa dallo smartwatch alla tv e quindi bisogna in qualche modo trovare dei sistemi che si adattino in maniera dinamica questo chiaramente tutto qui non c'è quel poco che sono riuscito a fare in questa maniera molto poco elegante è di adattare la coordinata x quindi metterla almeno a 10 e poi adattarla in base alla posizione cioè al schermo spostandomi a destra se c'è spazio in sostanza questa idea di questa in questa funzione qui max e poi la dimensione orizzontale del pulsante anche qui è almeno 200 però poi si adatta se lo schermo più piccolo sostanza questa è l'idea e in pratica quello che accade è una cosa del genere il pulsante in basso a destra poi quando si rimpicciolisce si stringe e non va fuori dai bordi del del dello schermo però ecco quindi insomma questa cosa qui che in in css è banalissima in flatter vedrete è altrettanto banale in win32 bisogna fare delle operazioni con i pixel che insomma in cui è molto facile incartarsi ed è molto facile tagliarsi poi è vero che poi in genere non si lavora mai da solo soltanto per win32 quindi in genere si appoggia alla libreria di qualche genere che spesso fa alcune cose per noi quindi ci aiuta un po l'esempio più classico appunto è quello delle windows forms che è win32 per dotnet tra virgolette e lì alcune cose le fa windows for us per noi è possibile dire ok fai in modo che il pulsante rimanga ancorato sotto a destra e allora tutte queste operazioni qui le fa windows for us per noi però alla fine dei conti si tratta di di queste operazioni rettmetiche qui ok facciamo un'ultima cosa utile ossia gestiamo il click quindi questo pulsante qui adesso va bene che non va fuori dai dai dai dai bordi però ancora non agisce quindi bisogna andare nel nostro web command qui esatto e gestire l'arrivo dei clienti in sostanza quindi l'idea è che dentro web command a ecco una cosa importante questo web command questo è un è un messaggio super generico perché dicevo prima appunto i menu che si creano messaggi di questo tipo i pulsanti pure e tante altre cose creano comandi di questo genere per cui qui dentro bisogna ulteriormente filtrare il messaggio per capire che cosa ci è arrivato giusto per cui chiaramente quel comando si porta dietro una serie di parametri informazioni che ci arrivano tramite param e l param tra cui il l'id della finestra cieli di del pulsante in particolare era quello che abbiamo passato nella creazione del pulsante e poi anche il tipo di attività il tipo di comando che è stato esercitato inviato questo discruttivo era molto molto complessa va bene comunque dato non c'è molto aiuto non è importante allora la cosa che è importante è che allora quello che ci interessa è tutto quanto dentro w param quindi questo param qui in particolare la parte alta se ricordo bene no la parte bassa invece la parte bassa è di di della finestra quindi quindi è la parte bassa di v param quindi questo è sarà un due tre perché ho creato la finestra con questo id qui così di lo chiamiamo i di pro realtà è un'altra meno insomma però non è importante e poi il codice di notifica quindi il tipo di notifica di comando che è stato inviato è è la high worth di w param e ogni quindi quindi sarà 123 ok qui faccio anche qui veramente il codice è tutt'altro che ideale però chiaramente è idealmente avremo una specie di mappa dei pulsanti previsti della nostra finestra quindi abbiamo un grosso switch oppure un'altra struttura dati più sofisticata che ci permette di distinguere tra i vari clic non è necessariamente faremo una dentro che non è il modo bello per fare le cose però ecco alla fine dei conti facciamo questo e a quel punto ricevi a ci andiamo a discriminare in base al tipo di clic che è stato che è stato generato in particolare i pulsanti possono generare una serie di di notifiche tra i vari volete o di comando è la button notification clicks ossia la notifica di click dei button perfetto assicurando e i pulsanti chiaramente con i button generano vari c'è una lista completa dei ah c'è qui per esempio i button control notifications sono tutti messaggi di notifica che quindi ci arrivano attraverso un wm command no? che i button quindi le finestre di classe button possono inviarci quindi c'è per esempio c'è drop down questo pulsante in particolare non può inviare perché non ha un drop down però questo tradisce il fatto che i pulsanti in realtà hanno tante funzioni nascoste il drop down è la comparsa del menu a tendina che serve solo per i pulsanti che hanno la linguetta a destra adesso vi sarete imbattuti sono abbastanza rare anche quelli però alcuni pulsanti hanno una specie di linguetta laterale che permette di avere delle opzioni aggiuntive quello è il messaggio che notifica quella cosa lì double click disable quindi questo è il messaggio che non è il messaggio che ci dicono quando il pulsante ha preso o ha perso il focus ossia il focus intende adesso il focus non ce l'ha il focus si vede vasto bene perché è questo bordino scuro che è attorno al pulsante significa che il pulsante al momento ha il focus e il focus è sempre esclusivo nelle 1.32 ed è la la la il punto di interazione attivo per la tastiera la tastiera può avere un solo punto di interazione su cui è focalizzata alla volta e quindi nel momento la tastiera è focalizzata sul pulsante tant'è che se se pigio il tasto spazio è come se spingessi sul pulsante perché la tastiera è focalizzata sul pulsante se la tastiera fosse focalizzata su un altro controllo per esempio un edit un box per la scrittura scrivendo scriverei del testo nel controllo però in sostanza in base alla presenza o l'assenza di focus la tastiera si comporta in maniera diversa e in questo modo possiamo seguire il focus della tastiera se vogliamo e così via però la parte importante chiaramente è bn clicked e quindi cosa facciamo qui andiamo a scremare ulteriormente il codice e andiamo a verificare che sia bn clicked ok questo perché chiaramente la tastiera il pulsante può generare tantissime notifiche e ci interessa sapere quando è stata cliccata in particolare a questo punto vogliamo fare vogliamo risettare i punti quindi adesso chiaramente di norma si andrebbe a richiamare una funzione però adesso copiamo e incolliamo senza alcuna pietà e a questo punto la teoria vuole che cliccando il pulsante si possa risettare la grafica è vero? ok e a questo punto ah ha funzionato da un attimo adesso ho compilato adesso vi faccio vedere subito vedete la grafica che è cambiata è quella moderna miracolo e tra l'altro no non è ancora dpi aware perché salta questo non ha funzionato però il manifest in parte è stato letto per cui non so se questo ha funzionato o questo adesso ne pubblicherò una versione che funziona veramente però dopo la ricompilazione Windows si è accorto che il manifest c'è e quindi il pulsante finalmente ha un aspetto moderno ok senza che senza che si sia senza che si che che che senza aver cambiato nulla lato nostro la grafica è cambiata non è cambiato il font ancora quindi questo è molto parziale però se non altro vedete che evidentemente è cambiato il cioè la praticamente in pratica cosa accade che per compatibilità nella versione classica Windows punta a una window procedure del pulsante molto vecchia che ne sale a un'altra cosa che è cambiato il font. quindi è cambiato il punto 11 adesso appunto appunto a una window procedure che risale a Windows 10 in questo caso ok quindi cambia in sostanza la funzione che si occupa di segnare e gestire il pulsante ce ne sono tante per ogni versione di Windows e poi per compatibilità vengono se le porta dietro ogni volta perché deve emulare le vecchie versioni di Windows per le applicazioni che non sono state aggiornate per quella versione. ok però anche questo mi è sorpreso quindi la direzione è quella giusta e il pulsante si comporta come ci si aspetterebbe. ok se adesso avessimo voglia al tempo di creare anche un menu vedremmo che potremmo creare un entry nel menu qui che corrisponde a questo pulsante. quindi creeremmo creare un file che presenta i punti con lo stesso id del pulsante. quindi creeremmo nel menu creeremmo un oggetto cliccabile che condivide l'id col pulsante e a quel punto il web comando da gestire è esattamente lo stesso. ok questa è l'idea di fondo degli id è proprio quello di poter riciclare il comportamento per lo stesso window id. ok e ci siamo direi che non devo perdere ulteriore tempo su questo per cui direi di... ah un'altra cosa volevo farvi vedere sì forse vale la pena perdere un secondo su questo. abbiamo visto tanti messaggi diversi in realtà quindi abbiamo visto che alcuni messaggi servono per notificare delle cose che accadono. quindi in particolare non so web create è classico messaggio di notifica la finestra è stata creata. c'è web size pure che è un messaggio classico di notifica che ci arriva dopo che la finestra è stata ridimensionata in realtà. ci aggiorna del fatto che la finestra adesso ha una dimensione a tal dettagli. chiaramente questo messaggio arriva dopo il ridimensionamento perché il ridimensionamento da parte dell'utente è interattivo quindi l'utente trascina e ridimensiona e di volta in volta Win32 ci avverte del fatto che ok l'utente adesso ti ha costretto in queste dimensioni tu puoi reagire andando a ridimensionare gli elementi interni. anche paint è una notifica che adesso devi disegnarti a schermo però è una notifica un po' diversa perché prevede che la finestra faccia qualcosa in reazione. cioè si metta a ridipingersi e poi a conclusione della web paint abbia concluso le sue operazioni di pittura. questo è sempre un messaggio notifica sempre un messaggio notifica sempre un messaggio notifica di un comando in questo caso. esistono alcuni comandi alcuni messaggi speciali diciamo così che sono sincroni e che richiedono una risposta immediata da parte della finestra. sono messaggi ad altissima priorità perché vengono gestiti immediatamente. quello più fondamentale è il cosiddetto heat test cioè la verifica di collisioni tra il mouse e la finestra. ossia è uno dei primi messaggi che invia Win32 alla finestra per vedere se il cursore, il punto del mouse passa su una zona attiva della finestra o meno. adesso lo vediamo brevemente perché è particolare ci permette di fare delle cose un po' atipiche. ve lo faccio vedere qui. avevo aperto altre parti. ah questo è un cibo. ok questo quindi questo messaggio qui è il window message non client heat test message quindi è un messaggio che va a fare il heat test quindi la verifica di collisione nelle zone non client in generale cioè su tutta la zona della finestra. quindi in sostanza va a chiedere alla finestra scusa il cursore in questa posizione qui su che zona della finestra si trova. a cosa corrisponde questa parte della finestra che tu stai gestendo. e la cosa importante è che la window procedure quindi la procedura di gestione dei messaggi deve rispondere con un valore che abbia un senso. in particolare deve rispondere con uno di questi valori qui previsti dal da winter 32 che sono le varie zone interattive barra calde che possono esistere su una finestra. adesso brevemente vedre insieme la più classica è hd client cioè quando il puntatore passa sopra questa zona qui che è la zona client. diciamo la nostra che è più chiara. tutta la zona qui bianca è la nostra client area no quindi la zona in cui disegniamo noi quindi su tutte queste parti qui risponderà hd client. quando passa qui il cursore chiaramente risponderà hd caption ok quindi perché siamo sulla da dot bar. quando passa sul pulsante close risponderà hd close nel senso che quando il pulsante arriva qui il cursore arriva qui risponderà hd close perché segnala a windows guarda attenzione sei su una zona in cui si trova il pulsante close. in genere nessuno implementa questo messaggio cioè è la def window proc delle 15.2 che si prende la riga di gestire questi messaggi perché tutte le finestre sono uguali se ne prende in occhio al windows. però questa cosa ci è utile perché possiamo prendere il controllo di questa di questa funzione per fare cosa per fare in modo che la nostra finestra si comporti in maniera atipica quindi per esempio. per concludere anche le parti a margine funzionano così perché queste queste zone qui sono speciali perché la messaggio è nel si risponde hd bottom e ci potete per la cibo right e così via cioè le varie zone di dimensionamento della finestra che fanno sì che poi in 32 cambi in maniera corretta il cursore sulle varie zone no quindi noi possiamo ridefinire la questa questo messaggio rispondere sempre per esempio non so hd bottom a quel punto tutte le zone della finestra permetteranno di dimensionare la finestra da sotto come se fossero tutte la barra sotto non ha molto senso in questo caso chiaramente però possiamo avere a quel punto finestre che non sono rettangolari se ci interessa fare qualcosa del genere oppure finestre che non sono standard quindi magari che hanno il pulsante di chiusura sotto a sinistra o che ne so dimensioni cioè forme completamente atipiche perché internamente per un motivo per un altro vogliamo occuparci della maniera contattività donna di come funziona la finestra questo avviene per esempio come al solito l'esempio classico è visto studio code che appunto non sembra però fa tanti di questi magheggi perché in realtà della finestra classica di windows non c'è rimasto molto quindi questi pulsanti qui sono pulsanti sono rimplementati e rimplementati somigliano molto a quelli di windows 10 ma sono fatti dal studio code la barra di trascinamento quindi quello che normalmente è hd caption questa qui quella che permette di trascinare la hd caption oltre ad avere il titolo è quella che permette di fare un spostamento nel caso di studio code non è tutta la barra quindi ci sono solo alcune zone che sono veramente hd caption vai via e sono queste zone qui non coperte da funzionare quindi fino a qui e queste si comportano col trascinamento classico perché la finestra segnala a windows che lì può essere trascinata facciamo questo esperimento un attimo per vedere come funziona perché in alcuni casi può essere quindi case test ok nella maggior parte dei casi non facciamo nulla lo facciamo fare dal dal da l'ex window proc ok anzi possiamo fare ancora una cosa interessante possiamo fare e risalto possiamo prima chiamare default in the pro non farlo così gestisci tu fai tu la hit testing e determina cosa cos'è se ci troviamo su hd caption quindi se il risultato sarebbe hd caption allora sovrascrivo il valore e lo faccio diventare hd client ok quindi adesso sto chiamando prima che ho intrito a due se per puro caso mi trovo dentro ho fatto il contrario se mi trovo nella zona client voglio far finta di essere nella zona hd action quindi voglio trasformare tutta la zona client in bar del titolo non è che sia particolarmente utile nello specifico però per sperimentare ok eseguo adesso vedete che quando clicco quando clicco sulla finestra tutto si comporta come se fosse la bar del titolo quindi la sto trascinando sul client praticamente e non riesco più a cliccare perché adesso è come se cliccasse sulla bar del titolo ok quindi si comporta come se tutto quanto fosse caption intanto se doppio clicco sul si dimensiona perché è come se doppio cliccasse sul bar del titolo ok e tutte le altre zone sono ancora attive nel senso che tutte le zone di ridimensionamento ancora funzionano e quindi il comportamento per il resto è mantenuto però ho trasformato tutta la zona client nella mia zona del titolo questo non riguarda la finestra perché appena il cursore passa sulla finestra figlia tutti i messaggi inviati dal cursore vanno alla finestra figlia quindi a questo punto arrivano dal pulsante il pulsante si infischia del mio NDC test e risponde in maniera corretta quindi qui non posso trascinare mentre qui si ok altro esperimento anche qui invece di fare H caption potrebbe essere H di bottom e a quel punto tutta la finestra si comporta come la barra inferiore di ridimensionamento questo è ancora meno utile dell'altro esercizio però sulla carta adesso vedete che posso trascinare in qualsiasi zona io mi trovi eccetto la caption eccetto le altre è tutta barra di ridimensionamento questo è concettualmente utile se voi avete una finestra un po' strana quindi se volete occuparvi anche del titolo appunto potete metterci gli oggetti dentro e escluderli dalla caption quindi renderli zona del client e se volete non so se avete un oggetto una parte della finestra prensile magari graficamente in qualche modo potete renderla una parte di trascinamento ridimensionamento perché magari vi torna utile vi torna in qualche modo a senso nella vostra applicazione appunto nella maggior parte dei casi cioè insomma vi ha dimiso a non fare queste cose però sappiate che sulla carta potete ridefinire la finestra è tutto il regno cioè il regno vostro quindi qualche volta potete farci quello che volete potete dire a Windows cosa corrisponde nelle varie zone e potete farle comportare come volete in realtà il fatto che tutta la schermata sia trascinabile si fa spesso se per esempio avete un che ne so se ripetucete un video per esempio se siete un video player di qualche natura capita spesso che in realtà si possa trascinare anche sul corpo della finestra ma questo comportamento qui non è così inusuale soprattutto se la finestra che ne so rappresenta un video a tutto schermo in quello scenario spesso la palla dietro non c'è e si trascina su tutta la finestra quindi in questa in questa maniera molto semplice questa si cioè è un video in questa maniera quindi si dice a Windows guarda è tutto quanto parte della barra del video ok questa tra l'altro questo messaggio qui appunto è un messaggio atipico perché è un messaggio che richiede una risposta ok la parte importante è questa nel senso che nella maggior parte dei casi quando ci arriva un comando è il modo che ha Windows per segnalarci che qualcosa è avvenuto e il nostro quello che noi ritorniamo da questa funzione qui non è importante perché nessuno cioè viene ignorato perché non importa a nessuno se vogliamo fare qualcosa lo facciamo in reazione alla modifica in questo caso invece quello che torniamo dal messaggio è molto importante perché serve all'invento 2 per reagire in qualche modo questo messaggio qui è fondamentale deve essere rapidissima la risposta a questo messaggio qui perché altrimenti tutta l'interfaccia utente della vostra applicazione si rallenta in maniera molto visibile tanto potete immaginare che questi messaggi qui vengono inviati con una grandissima frequenza perché per ogni spostamento del mouse chiaramente Windows deve andare a chiedervi ma scusa dove vi trovo e come devo comportarmi e così via per cui vengono mandati con altissima frequenza esattamente come viene per i messaggi di spostamento del mouse e così via ok spero che fosse vagamente comprensibile adesso facciamo l'ultimo step in realtà nel mondo del Q32 ossia andiamo a creare delle finestre figlie che non si appoggiano al comportamento standard ma sono finestre figlie che andiamo a definire noi perché hanno un comportamento che ci interessa in qualche modo e per l'idea è di ottenere una specie di gioco del tris come avete visto prima quindi una specie di griglia regolare con delle finestre cliccandoci a bairo delle forme geometriche e così via ok per farlo probabilmente conviene riprire da zero direi ah ultimissima cosa magari giusto per apprezzare come cambia la cosa se qui appunto vado da push button a command link facciamo un esperimento visto che siamo riusciti a far partire l'applicazione in modalità compatibile con ah no invece no questo lo dico dopo perché non funziona però stile che sia diverso ok vediamo quel checkbox quindi basta cambiare stile e l'aspetto del pulsante cambia radicalmente ok quindi questo pulsante che è grande 200 alto 50 si comporta come come spunta ok cioè è elettografico spavita benissimo e e quindi può essere cliccabile adesso qui la spunta non funziona perché non c'è nessuno che reagisca alla notifica sono stato cioè sono stata spuntata o meno e il il click tra l'altro non viene audio sono ancora nella modalità sbagliata spuntata o meno non fare nulla non fare nulla vedete qui nonostante il pulsante per un aspetto grafico diverso che non sia diverso in realtà la notifica di click la emette lo stesso quindi in realtà i pulsanti li esenzio dallo stesso anche se a livello grafico non ha consenso ok il comportamento è uguale le notifiche sono le stesse però l'aspetto del pulsante cambia ok per una copia a questo punto facciamo un esempio con c punto c e qui andiamo finalmente a creare delle finestre figlie ripulisco un attimo qui il codice quindi togliamo tutte queste cose qui queste cose qui non ci interessano più WMSize anche WMpins soprattutto non ci interessa più quindi togliamo tutto non ci interessa ok ok riparte ok siamo di nuovo qui allora vogliamo ottenere qualcosa che somiglia vagamente a non a questo che è già stato fatto e vogliamo farlo cioè che somiglia a questo magari 3x3 invece che 5x5 così somiglia proprio al tris classico e quindi se volessimo fare una cosa del genere e farlo soltanto con una finestra singola e gestire le cose internamente come potremmo farlo allora potremmo farlo in vari modi chiaramente però la cosa più banale che ci può venire in mente è ok faccio una griglia 3x3 quindi quando faccio quando mi arriva il messaggio web size tengo traccia della dimensione dello schermo e suddivido diviso 3 le zone di ogni cella della scacchiera ogni casella della scacchiera poi quando l'utente clicca sulla zona sulla mia finestra vado a determinare dove ha cliccato e in base alla coordinata vado a capire su quale delle nove caselle ha cliccato e poi mi segno internamente avrò una matrice di punti di stati vado a mettere la x o il cerchietto giusto e a quel punto nella vm paint cosa faccio vado a ridisegnare la scacchiera potrei ragionare in questi termini la comprensibilità di farlo in questa maniera è che ogni volta che l'utente clicca chiaramente devo andare a capire dove ha cliccato e poi quando faccio la vm paint devo andare a disegnare la scacchiera per intero e in base alla mia struttura data interna che tiene traccia di dove ci sono x dove non c'è nulla dove c'è il tondino e così via questo si può fare quindi tendenzialmente qualsiasi cosa si voglia fare si può fare così quindi gestendola come un'unica finestra però chiaramente non è non è ideale se riusciamo a suddividere in componenti la nostra interfaccia udente in genere questo ci aiuta molto perché possiamo riciclare il comportamento delle varie componenti nel nostro caso specifico l'idea è di rendere le singole caselle della scacchiera dei componenti quindi delle finestre a sé stanti che si comportano in maniera standard che quindi possiamo riciclare quindi a quel punto se vogliamo moltiplicare gli elementi della scacchiera basterà aggiungere altre finestre di tipo casella senza che si vada a complicare il code proviamo a farlo quindi l'idea è questa abbiamo finora qui abbiamo una singola classe di finestra che è la classe madre la classe principale creiamo una singola finestra quello che andremo a fare è definire una seconda classe che sarà la classe casella mettiamo con una propria window procedure che è completamente diversa dalla window procedure della classe principale e poi la classe la finestra principale andrà a istanziare istanziare nuove istanze delle caselle in modo da formare una prima idea questa è l'idea ok per fare questo andremo intanto a creare una seconda classe quindi andremo a fare a copiare questo codice qui la registreremo subito dopo aver registrato la prima quindi faremo qui faremo window class se lo volete questo ok e cosa cambia allora qui non cambia nulla quindi tutte le celle scacchiere si ridisegnano quando vengono ridimensionate e questo chiaramente cambierà quindi non avranno la stessa funzione di procedura se no si comportano alla stessa maniera della della finestra principale cosa che non va bene hinsons va bene è uguale l'icona non è rilevante quindi in realtà non serve impostarla le finestre figlie non hanno mai un'icona il cursore invece sì quindi load cursor invece ha senso perché noi vogliamo che passando sopra alle caselle della nostra scacchiera magari si attivi il cursore a forma di mano quello della della dei collegamenti per testuali mi sembra che il codice sia indici hand ma non vorrei inventarmi qualcosa quindi per essere sicuro ci guarda vediamoci vari cursori standard nel in B32 la mano dell'interazione tra quelli classici dovrebbe essere vediamo se ecco per se c'è una lista di cursori da che parte spero ovviamente no ok immaginette molto simpatiche quindi noi vediamo il pulsante che è questo indici che ci avrei preso così originale quindi vogliamo che sopra le caselle ci sia la mano lo sfondo va bene bianco eccetera la classe invece deve essere lo chiameremo ho detto casella casella ok qui la variabile ok quindi casella sarà la nuova classe e ovviamente servirà una video procedure diversa che andremo a fare subito quindi anche qui la copiamo senza alcuna abietata qui sopra la chiamo procedura casella e qui ci sarà un grosso switch che però adesso per ora lo togo attenzione il VMDestroy allora qui se noi lasciassimo tutto così le caselle vengono distrutte insieme alla alla finestra madre ma non devono fare il post message per forza che chiaramente la chiusura dell'applicazione la fa la finestra madre non serve che le singole figlie facciano la stessa cosa quindi qui lo possiamo togliere integralmente ok per ora non si fa assolutamente nulla mettiamo riferimento corretto qui sotto qui ok a questo punto abbiamo due classi di finestra la mia classe principale e poi la la classe secondaria qui metto tris come nome ok e a questo punto che cosa serve quando creiamo la finestra principale dobbiamo creare le nostre nove caselle sotto le nostre sotto finestre ok per cui nella web create della classe della finestra madre andiamo a istanziare subito le sotto finestre per fare questo ci servirà una struttura data dove memorizzare le varie i vari puntatori a casella a finestra quindi una matrice di age window ok e la chiamerò age window scacchiera così sarà una matrice fissa quindi anche qui possiamo definire una specie di costante con define facciamo che cells le facciamo tre cells e cells ok quindi abbiamo tre per tre finestre così a questo punto dentro la web create andiamo a creare la nostra scacchiera qui facevamo delle operazioni con l'htc adesso in realtà non ci serve più tanto perché non andiamo cioè dentro la finestra madre quindi la mia procedura non serve cioè non ci serve più disegnare quindi in realtà né web paint né web size e così via ci servono più perché dell'aggiornamento grafico se ne occuperanno le sottofinestre i nostri sottocomponenti quindi questa cosa qui la possiamo togliere e andiamo semplicemente a creare le finestre figlie lo faremo con un doppio ciclo in realtà anche qui perché sono tre per tre in griglia vogliamo fare che basta cambiare questa costante per aumentare il numero di figlie quindi faremo un doppio ciclo x0 a 0 x0 a 0 x0 x0 a 0 x0 questa cosa che si fa molto spesso quando si hanno molte finestre figlie da gestire o a riga o a colonna o a griglia in genere si fa in questa maniera qui andiamo a scattiera a creare l'elemento xy non so scrivere ok no ok adesso qui come al solito serve tutto quello di di parametri purtroppo allora il primo è il nome della classe ed era già ho dimenticato era casella credo ok poi il testo della finestra figlia nel caso del button era rilevante perché quel testo lì veniva usato o come contenuto del pulsante o come testo affiancato alla checkbox come avete visto un secondo fa se ricordate quindi in questo caso qui il text compare perché poi la finestra in qualche modo ne fa uso nel nostro caso le caselle non hanno testo quindi in realtà non è assolutamente rilevante metterci cosa di utile e quindi ci mettiamo nullo ok quindi il text può anche chiaramente non esserci la no child la finestra avrà due stili uno è il fatto che è una finestra figlia e l'altro è che è visibile ok qui non c'è nessun stile aggiuntivo come avveniva prima con col button quindi qui creavamo un button con button style checkbox in questo caso se noi volessimo noi potremmo definire degli stili aggiuntivi nostri potremmo fare delle caselle colorate caselle diverse caselle che siamo porti in un'altra maniera sulla base di stili che definiamo noi ok nostra libertà definire degli interi che siano combinabili con questi che abbiano dei valori specifici per noi perché siamo noi quelli che implementiamo la window procedure ok quindi questo questo valore qui ha un senso soltanto per le classi di tipo button quindi passare bs checkbox a una classe che non è button in genere non ha alcun effetto perché la classe dalle altre finestre non gestiscono questo valore qui però noi potremmo farlo liberamente passando altri stili in questo caso però non lo facciamo tutto è uguale le nostre caselle non hanno nessuna posizione quindi 0 0 0 0 quindi sono invisibili sono larghe 0 alt 0 così via tutte hanno come madre la finestra stessa ovviamente e a questo punto possiamo metterci se ricordate qui abbiamo messo 1 2 3 no 1 2 3 per il pulsante dopo vediamo cosa metterci il modulo è sempre quello principale quindi carichiamo il module handle e poi passiamo null qui dentro ora qui dentro nell'id anche qui possiamo usarlo in vari modi non è importantissimo usarlo perché la casella in realtà poi non dovrà mai comunicare con la con la con la finestra madre o cioè non deve però potrebbe farlo mettiamoci qualcosa che però è rilevante per noi o se mettiamoci una codifica del numero di casella in qualche modo per cui il modo con cui lo facciamo è se se la x no scusate se la y è il contatore di riga no quindi potremmo fare y per il numero di celle più la x giusto? sì in questo modo in questo modo la prima casella è zero perché la riga la y è zero per tre zero più zero zero l'ultima casella della prima riga sarà zero per tre zero più due quindi due e l'ultima casella in generale sarà riga due quindi due per tre sei più due otto quindi sarà l'ottava casella giusto? no è giusto giusto? ok per cui le abbiamo numerate da zero perché sappiamo che sono nove caselle per cui se ci servirà a un certo punto sapere qual è la casella cliccata abbiamo un modo per determinarla a quel punto chiaramente sull'altro lato dovremmo fare il modulo sales e possiamo tirar fuori riga e colonna da questo calcolo qui ok a questo punto in teoria le caselle ci sono ma chiaramente le caselle non sono ancora visibili ma soprattutto sono tutte schiacciate in alto a sinistra non sono veramente visibili per cui dentro web size possiamo fare la solita cosa quindi adattare le dimensioni delle caselle e anche qui lo facciamo in maniera interattiva cioè interattiva dinamica in base a quello che è accaduto per cui cosa facciamo facciamo no potremmo anche fare un bordino la scacchiera magari ha un bordino interno di 10 pixel mettiamo quindi proviamoci allora sell width sarà width width width fratto cells e poi in realtà facciamo un block width intanto anzi facciamo block width lo spazio per ogni casella è questo block height sarà questo quindi le caselle saranno rettangolari in genere perché non è che siamo la proporzione non farà mantenuto si adatteranno in base a quello che è e a questo punto vogliamo che la cella abbia un piccolo bordino interno perché metteremo 5 pixel su ogni lato per fare in modo che ci sia dello spazio bianco tra un elemento e l'altro della scacchiera per dimensionare facciamo il doppio ciclo quindi partiamo da zero così è bello passare a flat perché tutte queste cose super imperative e iterative non bisognerà più farle questo è bello di passare uno stile di grafica dichiarativo in cui non bisogna più comportarsi in questa maniera andando a spostare le cose in maniera manuale allora chiaro questo è come prima quindi la finestra di riferimento è edge window cos'è la scacchiera x e y ok adesso la posizione sullo schermo quindi la x sarà x per block width giusto perché quella è la nostra colonna quindi la colonna x per la grafica del blocco la y sarà y per block height ok però a questo in realtà aggiungiamo il bordino per essere corretti diciamo un bordo di 5 pixel al lato quindi vogliamo che ci sia un più 5 le pareti non servono però le metto per carineria e la grandezza dei elementi è block width meno 10 perché il margine sia a sinistra che a destra e block height meno 10 e poi l'ultimo parametro è devo ridisegnarmi no devo refreshare la finestra no perché lo farai in automatico se la dimensione della finestra cambia tanto lo farai in automatico il refresh se viene solo spostata per ragioni di efficienza non la facciamo non la forziamo ok adesso probabilmente ho fatto degli errori ma ci accorgiamo per un secondo adesso se compilo queste cose ancora non dovremo vedere nulla in realtà ok è esploso bellissimo quindi c'è qualcosa di profondamente sbagliato vediamo che cosa è sbagliato è un errore di basso livello vediamo che cosa è può essere questo è giusto questo è giusto USB effetto Grazie. Grazie. Grazie. Grazie. Grazie. In realtà, possiamo tornare anche uno volendo. Vediamo se l'errore è nella registrazione. No, entrambe vanno a buon fine. Quindi è la finestra in sé che ha un problema. Questo non l'ho cambiato, quindi direi che non è cambiato nulla. La mia classe è ancora live. Sì. Ho accesso alla memoria, ho sbagliato nei loop vari, molto probabile. X e Y è giusto. X e Y mi sembra giusto. Quanto è bello lavorare in C. Allora, vediamo se l'errore ho fatto qui. No, quindi non è questo. Il movimento deve essere la creazione delle finestre. Qui lo faccio. Oh. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie a tutti. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. Che cosa strana? Funziona? Infatti io ho il suo su... Ah, ok, è già qualcosa. Bene, anche quello. Allora, c'è un ultimo dubbio che... Vorrei che sia il compilatore che... Vediamo se le prete chiaro. Allora... Bene, ripartizzata. Questa la mettiamo così. E le metto. All'area di teoria, se il divulgaggio ci inganna, dovrebbe essere uguale. Questo mai. Allora, come è lui? Ok. Ok. Ok. Bene. No, zero. Zero per buon anno proprio. Giuro che l'anno scorso ha funzionato. Giuro che... Ho commesso un errore estremamente... invisibile. Se questa... la prima... ... Altra cosa. Allora, sì. Non rispettiamo la cassa, se non la usiamo. Vediamo se la cassa è da finestra da sola. Almeno... Vabbè, justamente... Se ha la dignità di comparire... No. Quindi non è proprio la classe... Quindi a cosa funzionava un secondo fa, qual'è il problema? Cosa è? Niente. Cosa è? No. Quindi non è proprio la classe... Quindi a cosa funzionava un secondo fa, qual'è il problema? Cosa... Cosa è? Cosa è? Ah? Cosa è? Cosa è? non fa niente ah ma l'errore è di una banalità scommettare niente mi vergogno proprio ho creato un pubbito di una banalità non so perché non ho visto zero è sempre micro di breve niente sono molto imbarazzato scusate poteva arrivarci complesso in realtà era un test per voi che avete fatto tutti quanti qui poi l'ho scritto bene al secondo ciro l'ho scritto bene al primo non so cosa mi vede in mente zero meno di tre ok dopo questo momento di estremo estremo imbarazzo andiamo avanti quindi allora se evitiamo di farci confiniti dovremmo riuscire a creare le cose voglio dare colpa a c a windows oh ok meno male ripetiamo da dove eravamo arrivati adesso abbiamo la nostra finestra quindi non so se nel suo caso non torna ok ok rassicurato guardiamo però giusto per far vedere come che cosa avviene quindi con WemSize abbiamo abbiamo creato queste nove caselle in teoria e cioè sappiamo che esistono perché cambia puntatore nel senso che quando passiamo sopra alla casella il puntatore assume la forma di una mano perché specificato che la classe casella prevede la mano e abbiamo dei piccoli bordini in mezzo che apprezziamo perché cambia il puntatore e sappiamo che le celle esistono anche se ancora non le vediamo quindi adesso la primo step è farle vedere quindi faremo un bordino come abbiamo fatto la volta scorsa e poi vediamo di renderle interattive se evitiamo di fare altri ciclo infiniti ce la dovremmo fare ok adesso una cosa se nel suo caso che cosa compare o non compare ah allora lascio il bordino così andiamo avanti qui faccio WemPaint l'idea è quella di di fare un banalissimo bordino nero esattamente come abbiamo fatto la volta scorsa quindi lo riprendiamo da qui ah qui lo trattiamo retta va beh è uguale ecco ok così ok ok qui in realtà facevamo delle operazioni un po' atipiche cioè facevamo un rettangolo bianco sopra quello nero quindi possiamo fare la stessa cosa se vogliamo quindi facciamo così facciamo qui e facciamo in modo che le caselle siano nere di base quindi le caselle saranno qui avremo un black brush come sfondo e poi noi internamente nella procedura non principale ma procedura casella che ovviamente deve essere in ordine inverso perché sono molto bravo e quindi la quell'ascia lo sfondo poi leggiamo quattro grande è la casella facciamo un bordino più piccolo io facciamo un bordino di un pixel e ci disegniamo un rettangolo bianco potremmo anche fare un bordino tracciando l'ettangolo usando la penna nera di un pixel tracciando l'ettangolo per il caso dovrebbe essere draw rect che è il comando giusto però sono equivalente a livello grafico quindi facciamo questo non si vede assolutamente nulla è una storia di successi questa è una situazione di dire che cosa sbagliata stavolta teoria teoria nulla corretto questo incrementante di 1 sinistro e top deve che va bene ma va bene sì giusto pronta allora no funziona perché ho detto che deve essere nero lo sfondo quindi sta disegnandoci il bianco sopra comunque questo è un pixel non basta per l'effetto ah ok finiamo di dipingere questo non è molto bello e bisogna dire la finestra di ridipingersi perché qui mi sa che ho detto false quindi in realtà stiamo costringendo la loro di dipingersi questo in effetti non è proprio furbo perché in effetti se vengono spostate la prima volta è il caso di dipingere quindi le forziamo e adesso il primo lancio finalmente si vede ok ok quindi questa cosa qui è quello che ci aspettavamo più o meno per cui abbiamo una griglia ogni casella ha il pulsantino cioè la mano sopra e a questo punto bisogna renderle interattive in qualche modo adesso noi vogliamo fare cioè vogliamo fare in modo che cliccando a prima volta ci si disegni la X e magari al secondo giro ci vada il cerchietto per dire e per fare questo bisogna trovare un posto dove ricordarci dello stato di ogni casella perché bisogna tenere traccia di qual è lo stato della casella in modo tale che poi la WM Paint della casella stessa sappia cosa di segnare altrimenti non ha modo di farlo questo si può fare in mille modi diversi per esempio un esempio potrebbe essere di avere di nuovo una variabile globale esattamente come scacchiera ma magari mettiamo una matrice di interi che è status scacchiera e mettiamo tutto quanto a zero se c'è uno zero vuol dire che non c'è nulla se c'è uno uno vuol dire che c'è la x se c'è un due vuol dire che c'è un cerchietto e questo si può fare però poi nella attenzione nella procedura della casella cioè in questa procedura qui qui bisogna andare a capire ma quale cella sono cioè quale casella sono della scacchiera perché tutte le caselle hanno la stessa procedura quindi hanno la stessa funzione e quindi si comporta alla stessa maniera quindi qui bisogna andare in qualche modo a capire quale casella siamo noi e qui dentro bisogna trovare il sistema per scegliere se non si è nulla se fare la x o se fare il cerchietto ok in base al fatto che la casella tal dei tali è stata marcata in un dato nuovo ma questo noi potremmo anche farlo quindi l'idea è andiamo a leggere il nostro id quindi andiamo a leggere il nostro questo valore qui ok e questo si può fare come? andando a leggere tra le si può fare come get menu perché chiaramente possiamo andare a leggere qual è il menu di una finestra vi ricordo sempre che il menu è questo accrocchio che si usa in 32 è sia il menu della finestra principale sia l'id delle finestre figlie quando non sono principali quindi questo get menu qui gli si passa la finestra e si ottiene un h menu come ritorno che è lo stesso valore che si è passati qui quindi in realtà nella finestra figlia noi potremmo fare qui dentro potremmo fare get menu della finestra cioè di me cioè della finestra che in cui l'estate sto disegnando perché il messaggio arriva a ogni singola casella per cui questo get menu tornerà a un valore diverso per ogni casella e a questo punto con delle magiche operazioni di modulo di divisione riusciamo a calcolare qual era la x qual era la y originale perché l'abbiamo passata in questa maniera qui una volta che abbiamo x e y a quel punto viene abbastanza facile capire qual è lo status perché a quel punto facciamo status che era x e y e otteniamo l'intero che ci interessa ossia aiuto qui dentro ok questa è l'idea quindi in questo modo la procedura può cambiare comportamenti in base in base al suo id e cos'altro bisogna fare bisogna fare che quando clicchiamo sulla finestra quindi quando facciamo reagiamo a vml button app cioè quando l'utente clicca sulle singole caselle bisogna andare a modificare lo stato quindi faremo facciamo la stessa cosa di base sto parlando appunto con condizionale perché non faremo questo e qui andremo a fare più più insomma quello che è per andare a incrementare mettere a uno il valore e poi quando si ridipinge quella casella si ridipingerà con quello del valore questo si può fare e potremmo farlo tranquillamente così non lo facciamo perché in genere è un po' cioè crea delle complicazioni legare lo stato della finestra al suo id perché in quel modo stiamo sporcando stiamo legando le singole caselle quindi quello che vediamo qua allo stato globale dell'applicazione e soprattutto devono ogni volta vanno a capire chi sono nell'ottica globale dell'applicazione e come mi ridipingo all'utente quindi in genere nell'ottica di rendere componenti a sé stanti le finestre insomma non è non è un'idea pulitissima diciamo così è meglio se riusciamo a rendere un componente a sé stante le singole finestre e farle comportare in modo corretto senza che abbiano bisogno di entrare a leggere dei dati che non sono i loro dati in sostanza ok così la matrice dello stato come si fa qual è l'idea se noi ragionassimo a oggetti quindi se ragionassimo in C Sharp in Dart in C++ e avessimo la classe casella da qualche parte ci verrebbe automatico pensare ok basta mettere un boolean nella classe casella e metterci x cioè spuntato true spuntato false e poi la casella di sergiorni automatico questa cosa qui ma con gli strumenti preistorici delle Win32 per cui l'idea è la stessa l'esecuzione è un po' poco elegante diciamo però fondamentalmente è la stessa cosa quindi per avere dei valori aggiuntivi quindi dei campi se vogliamo parlare in C++ o in C Sharp dei campi bonus dove mettere delle informazioni nelle finestre ci sono questi questi oggetti qui che abbiamo sempre messo a zero fino ad ora adesso finalmente li utilizziamo che sono gli extra bytes quindi sono dei bytes extra che sono legati o alla classe o alla finestra quindi per ogni specifica classe o per ogni specifica finestra di quella classe possiamo portarci dietro dei bytes magici che winter memorizza per quanto nostro è come se avessimo una classe appunto con un intero un long un double boolean eccetera in più che possiamo manipolare perché ci è utile in qualche modo per cui quello che faremo è semplicemente aggiungere un intero alle singole finestre quindi ad ogni istanza ad ogni finestra di classe casella ci serve un intero quindi qui ci mettiamo lo scrivo così per chiarezza un size of long uso il long perché questi questi byte tutti li sono tutti di grandezza long maiuscola di quinto in 32 quindi ci serve un singolo long in più per ogni stanza di casella in questo long qui metteremo cioè non ho stato nullo stato x che farà 1 è stato cerchietto che pare 2 ok questo è un po' unirico come comportamento però è così che si fa quindi ragionate sempre che queste classi qui sono effettivamente come se fossero delle classi in linguaggio C++ o C Sharp e le usiamo in questo modo perché abbiamo un linguaggio che non ha le classi però quindi stiamo definendo le classi a runtime in sostanza con le primitive quindi concettualmente è la stessa cosa però chiaramente lo stiamo facendo con con con lo scalpello e il martello in sostanza ok quindi abbiamo a questo punto è già fatto c'è questo byte in più che viene allocato dalle win32 per ogni finestra dell'inistituzione quindi quando noi andiamo a vedere questa casella qui se ricompilassi ogni casella ha questo byte in più da qualche parte del win32 come si fa a leggere a scrivere questo questo byte magico beh è una proprietà della finestra e quindi c'è una funzione che si chiama get window long e set window long quindi c'è set window long e get window long che sono le due funzioni con cui possiamo leggere e scrivere questi byte aggiuntivi e li usiamo adesso tra un secondo per andare a modificare la strada della finestra e per comportarci di conseguenza quindi aggiornarci in maniera diversa dipingereci in maniera diversa in base all'interno che c'è di tempo get window long cosa fa? possiamo leggere i long aggiuntivi di qualsiasi finestra tra l'altro per cui basta passare un pulsore alla finestra e poi l'indice perché appunto sono tutti long sono tutti dei grandi long e quindi l'index è il long indexesimo che andiamo a leggere o a scrivere ok qui questo lo chiudo e a questo punto nella fase di disegno che è la parte qui giusto? sì quindi questa cosa non la facciamo perché appunto andremo a far dipendere l'applicazione da dati che non riguardano con get window long noi facciamo dipendere l'applicazione la classe il comportamento della classe soltanto dalle proprietà della finestra stessa che va bene nel senso che tanto quella poi è un compartimento che stiamo gestendo noi e quindi va bene così hwindow e l'indice sarà zero perché c'è soltanto un long quindi è sempre zero e quindi questo long qui è il mio status ora qui anche qui possiamo farlo in vari modi facciamo uno switch per chiarezza perché con case 1 voglio metterci la x con case 2 voglio metterci la incertezza ok come si fa la x si fa sempre con la penna e quindi bisognerà spostarsi di volta in volta quindi andremo a prendere la penna ci mettiamo sopra a sinistra tratteggiamo su e poi sopra a destra e tracciamo quindi facciamo u x hdc ci mettiamo nella posizione 1 e 1 sopra a sinistra sotto al bordino in realtà vabbè non sarà bellissimo e andiamo fino a rectclient punto questa è la x quindi right meno 1 e rectclient bottom meno 1 visto che sono in il lato sotto a destra e l'ultimo parametro è la posizione precedente che non ci interessa e questo dovrebbe essere quanto e poi line 2 ci spostiamo sempre su hdc ci spostiamo sotto a destra quindi rectclient right no ho fatto sì scusate evidentemente non più non sto facendo quindi lo spostamento chiaramente è una coordinata non avrebbe preso alcun senso e arrivo in questa posizione stiamo facendo tutto in 1 e poi di nuovo va andiamo sopra a destra e top più 1 questo è questo vero? sì questo questo questo è da sopra a sinistra ok e scendiamo a 1 e rectclient bottom sto facendo cose sbagliate forse no forse sì lo vediamo da un secondo sono qua sicuro che è sbagliato ma facciamo vinta che vedremo che cosa contare il cerchietto lo facciamo tra un secondo adesso lo ignoriamo e facciamo soprattutto dobbiamo flippare il click quindi possiamo dare al click questo che si aggiorni quindi cosa facciamo allora qui nel quando clicchiamo sulla sulla casella scusate prima andiamo a leggere quello stato attuale ok poi andiamo a aggiornare lo stato attuale quindi set window long che è uguale ma prende un terzo parametro che è il valore quindi age window indice sempre lo 0 e lo status aggiornato sarà status più 1 tutto modulo 2 diciamo così questo si può fare in vari modi modulo 2 così che è 0 1 cioè 0 1 2 e poi di nuovo è giusto modulo 3 ok ok per cui adesso lo stato sarà spento x cerchietto che non si vede e poi di nuovo spento e chiaramente una volta cliccato e aggiornato il valore dello status vogliamo invalidare la finestra chiaramente quindi validate rect age window quindi la finestra corrente la casella corrente quindi quando clicco sulla finestra si aggiorna solo quella sotto finestra non tutto lo schermo quindi si aggiornerà soprattutto quello tutto però e poi lo costringo e di tutto scritto ok ammesso che non abbia fatto degli errori clamorosi cosa piuttosto probabile per esempio ho sbagliato il numero di conflitto un 612 ah questo veramente prevede il nullo qui grazie ok vediamo che succede ok quindi i filetti sono così quando clicco incredibile no ci abbiamo preso e adesso qui c'è sempre il cerchietto adesso lo status è impostato a 2 non si vede nulla 0 1 2 0 1 si manca solo il cerchietto però ci siamo a questo punto posso trovare attrissi migliorare molto e perdere molto questo ok questo è più o meno facciamo anche il cerchietto per completezza almeno abbiamo anche questo e il cerchietto si fa con drawlips in 32 vediamo un po' quali sono i parametri che non mi ricordo funziona funziona come i rettangoli chiaramente daremo esatto daremo gli estremi dell'ellissi poi chiaramente se è un rettangolo farà un cerchio se non è un rettangolo farà un ellissi quello che dice sì e poi gli estremi allora quindi qui è più facile ho dimenticato come funziona ah no ellips è bassa ellips HTC e sarà 1 1 top right bottom ok questo verrà più facile cerchietti estremamente brutti magari con un po' di margine in più diventa più gradibile però questo è il nostro prototris chiaramente non funziona ancora perché non si può vincere chiaramente una mancanza una pecca abbastanza rilevante nell'ottica del tris quindi è giusto per cioè giusto per farvi vedere come si potrebbe fare metto adesso le basi di comunicazione perché come si fa a vincere nel tris in questo caso le singole finestre figlie non hanno visione a questo punto dello stato della scacchina hanno bisogno soltanto della propria cella quindi in qualche modo non hanno modo di verificare se l'utente ha fatto tris serve qualcuno di più alto livello che riesca a verificare questa cosa quindi manualmente nel nostro caso sarà la finestra madre che quindi deve avere notizia del fatto che l'utente ha cliccato perché adesso non sa neanche che l'utente clicca perché tutte le L button app sono mangiate dalle figlie quindi questi messaggi qui arrivano alle figlie non arrivano alla finestra madre quindi la finestra madre non sa neanche che ci sia un clic però può essere notificata con lo stesso strumento che abbiamo usato con il pulsante di prima quindi mandiamo un comando alla finestra madre quindi ci comporteremo assolutamente come pulsante standard di windows e a quel punto una volta che ho ottenuto il comando la finestra madre può andare a fare le varie verifiche vedere se ci sono delle righe delle colonne con dei simboli uguali e assegnare la vittoria al cerchietto o alla x il fatto che che le x e i cerchietti vengono messi l'uno dopo l'altro rende impossibile vincere per il cerchietto adesso che ci penso per bene perché basta sempre per la x quindi direi che è un gioco che non funziona molto bene ma non è questo lo scopo chiaramente però per farla breve quindi nel caso di un clic cosa vogliamo fare vogliamo mandare un messaggio alla madre alla finestra madre e lo facciamo qui dentro quindi nel l button up cosa viene intanto otteniamo un riferimento alla finestra madre quindi questo si fa con una funzione che si chiama get parent di una finestra edge window ok quindi in questo modo questo ci dà il puntatore alla finestra di cui siamo figli dirette chiaramente e chiaramente di get parent si può risalire le gerarchie in genere le gerarchie di finestra possono essere anche tante se sapete che siete annidate dentro due finestre si può fare get parent di get parent e andare alla finestra nonna sarebbe a dire giusto però in questo caso ci basta il parent di solito il pulsante parla il pulsante o qualsiasi tua finestra figlia parla sempre con la diretta madre poi se serve per migrare su i messaggi sarà la madre che a sua volta lo rimanda su come si manda un messaggio con send message è una primitiva con cui possiamo mandare dei messaggi questi messaggi qui sono messaggi come posso dire messaggi primitivi cioè mandiamo proprio un blocco che è uguale a un messaggio di quello che ci manderebbe Win32 quindi possiamo anche tra l'altro possiamo anche simulare dei click volendo perché vi dicevo prima che non c'è isolazione isolamento tra le finestre quindi possiamo tranquillamente prendere una finestra che non è nostra e simulare dei click mandando cosa? mandando dei messaggi di button up button up e button down che alla finestra bersaglio sembreranno dei click ovviamente penso che chiaramente sono tutti i messaggi uno vale l'altro per cui possiamo anche simulare del input utente in questo caso parliamo cioè mandiamo alla age parent mandiamo cosa? un messaggio la blip command e a questo punto i due parametri sono vparam e lparam quindi i due parametri famosi che possiamo agganciare ad un messaggio e se mi ricordo bene allora qui nella gestione poi del click riceveremo il messaggio quindi qui command break ok e se ricordate qui vado a risumare da qui abbiamo modo di segnalare qual è il nostro ID e qual è il codice di click ok quindi e sono parte del wmparam quindi dobbiamo infilare queste informazioni dentro il wparam perché sono parte del stesso intero quindi come si fa a fare questa roba è ovviamente una direttiva del processore che fa esattamente questo quindi è il param non è importante quindi è zero e wparam c'è una funzione che si chiama make wparam che prende le due parti la parte bassa e la parte alta la parte bassa è il l'ID della lo dirò della finestra l'ID della finestra qual è? qui in realtà non ce l'abbiamo quindi facciamo con get menu perché così lo otteniamo e l'altro l'altro ID è l'altro ID è il codice il codice arbitrario nel senso che i pulsanti ci mandano bnclicks che è la codice di notifica dei click però noi possiamo metterci come lo vogliamo ad oltre noi sappiamo che poi la finestra ci si traccia quello che nel modo che vuole quindi cosa ci mettiamo ci mettiamo il nuovo stato quindi ci mettiamo 0 1 o 2 questo si potrebbe fare in maniera più carina facciamolo sì prego c'è una ah sì no quello sono io che non so scrivere no devo dire ah a parte che ho scritto completamente fuori strada scusate allora sì ok ho scritto un po' sbagliato ops sì già scusi insieme di questo diciamo tipo per con il testo sinistro per esempio c'è la x lo tasto destro giusto sì ha molto più senso il giocatore la x esatto questo non ho neanche pensato però è una buona soluzione quindi faremo due case uno imposta lo status a 1 sempre magari potrebbe essere metti la x togli la x quindi se è già 1 lo metti a 0 quindi possiamo immaginarci in vari modi però sì quello risolverebbe il problema del rendere il gioco giocabile in effetti però in ogni caso il comportamento poi sarebbe lo stesso quindi impostiamo il window long invalidiamo questo stile di disegna e poi inviamo una notifica alla madre a questo punto la madre ha l'IPD della casella per cui può capire qual è la casella andando a fare le varie no andando a estrarre la riga la colonna se vuole e poi capisce anche come è stata impostata perché ottiene il codice quindi se è 0 è stata spenta se è 1 c'è la x se è 2 c'è un cerchietto quindi lato a questo qui non è l parametro è 0 e a questo punto qui dentro possiamo reagire adesso questo non lo facciamo però sulla carta qui potreste andare a verificare com'è lo stato della scacchiera ah tra l'altro come si fa? si può fare adesso noi la scacchiera non ce l'abbiamo lo stato perché lo memorizziamo dentro le finestre però in realtà basta andare a che ne so andare a vedere i successi con le righe finora fare una cosa di questo genere no questa stiamo stiamo girando per le colonne e verificare che sulla stessa colonna no h window scacchiera sono i puntatori alle alle caselle bisogna fare get window long per ogni finestra per ogni casella la x è questa la y è 0 quindi questa è la prima riga leggiamo il primo se sono tutte a 1 adesso non lo faccio perché è solo noioso da fare se sono tutte a 1 vince il giocatore con la x se sono tutte a 2 vince il giocatore con il cerchietto e poi stessa cosa per le altre righe quindi chiaramente questo poi lo metteremo in un altro ciclo chiaramente anche qui la verifica si complica rapidamente però concettualmente possiamo far così quindi per ogni riga e per ogni colonna andiamo a verificare se appartengono allo stesso giocatore e in quel caso poi possiamo determinare la vittoria del giocatore ovviamente ignorando il fatto che si può vincere anche in diagonale però a diagonale si può fare si possono fare due if appositi per le diagonali tanto quelle sono più banali e in quel caso sempre verificare la vittoria però questo lo lasciamo magari nella versione che vi consegno poi vi carico lo ripulisco un attimo e se volete poi potete finalizzare e attribuire la vittoria a uno del giocatore per chiudere visto che è già tardi poi vi abbandono che così possiamo proprio chiudere tutta questa parte le 532 sempre su Blended vi caricherò anche un programmino che può essere interessante che si chiama Inspect Inspect cosa fa? vi permette di andare a ispezionare proprio le finestre le sottofinestre delle Win32 quindi adesso provo ad aprire un attimo per farvi vedere cosa fa ecco è tutta la sua gloriosa interfaccia quasi leggibile non è il più bello delle applicazioni si vede quasi nulla però praticamente mentre voi avete attivo questo programma potete esplorare l'interfaccia di altre applicazioni con le Win32 passando col mouse sopra le finestre se ci rimane sopra ancora un po' vedete che si aggiorna e vi dice che tipo di finestra è adesso magari diamo fuori una più utile vedete questa qui non so se vedete in alto c'è H-Window c'è il numero questa è il pulsore della finestra quindi quella è proprio la H-Window la codice la classe è Edit ok passiamo sulla finestra principale ok questa finestra qui è di classe Notepad quindi chi ha creato blocco note ha registrato una classe che si chiama Notepad che è la classe di finestra principale ok ha un titolo che è Untitled Notepad e così via ha una serie di proprietà ovviamente ha una serie di stili anche che possiamo leggere qui ha una serie di figli chiaramente per cui adesso qui a partire da questa finestra qui che è la finestra di Notepad possiamo andare a esplorare i figli cliccando qui se lo ricordo ah e possiamo anche sottolineare ecco qui con questo strumento qui ci identifica qual è la finestra che stiamo esaminando quindi questi sono i pulsanti di quel composto Windows cos'altro poi questa era la status bar questa è la finestra principale vediamo se riesco a trovare no? aiuto potrebbe essere ok ho perso ok sono finito la finestra completamente slegata vabbè torniamo qui sta funzionando molto bene qui sono tutte finestre adesso ci stiamo ci sta ingannando che sono tutte finestre nascoste quindi le vedo lo stesso adesso si sta proprio barrellando la dimostrazione sta funzionando molto male si è incantato vabbè questo per dirvi che comunque si può andare a ristorare le finestre altrui e qui noto anche che la finestra principale di Visual Studio è Chrome Render Widget Post quindi questo appunto rende evidente il fatto che Visual Code come dicevo in realtà nasconde una finestra di Chromium quindi del browser Chrome e quindi la finestra di Composto è in realtà una finestra del browser alla fine dei conti camuffata però è una finestra del browser che controlla tutto quello che è vivo nel suo interno poi interagisce con il resto di Windows sempre con le Windows e questo vuol dire anche che come fa Inspect a capire come sono fatte le finestre altrui anche voi se volete potete andare a interagire con le finestre che non sono parte del nostro programma mandando dei messaggi o leggendo quali sono le proprietà delle finestre quindi in realtà il fatto che Windows funzioni è in realtà perché la maggior parte delle applicazioni sono molto educate e non fanno cose strane però sulla carta qualsiasi programma può controllare le finestre anche degli altri programmi e Windows stesso in realtà controlla le vostre finestre con i messaggi in realtà non c'è nulla di praticamente magico in quello che fa Windows per esempio anche ecco ho potuto farlo vedere prima tutte queste cose che vedete qui in realtà la taskbar stessa che fa questa operazione qui è implementata con le Windows 32 quindi in questo caso la taskbar cosa fa? con Find Window va a esplorare le finestre che esistono e vi mostra le finestre che sono di primo livello e le mostra a schermo poi chiaramente ha delle funzioni con cui va a leggere per esempio la caption delle finestre e la mette qui sopra va a creare va a creare delle preview anche quelle potete farle voi creando delle preview delle finestre e così via quando ci cliccate sopra va ad attivare la finestra bersaglio mandando cioè richiamando la funzione Activate Window che è quello che potete fare anche a un po' quindi potete attivare esattivare spostare le finestre operando allo stesso livello di autorità in sostanza del sistema quindi non c'è alcun isolamento da questo punto di vista questo è utile a chiudo perché tutte le cose che vedete qui snocciolate in qualche modo tutti i dettagli che vedete qui sono quelle che usano sono le informazioni che usano anche i sistemi di assistenza per i provvedenti o comunque utenti che attivano le funzioni di disabilità che sono presenti in Windows ma anche in altri sistemi e che quindi si basano su queste proprietà qui per rendere più funzionale l'interfaccio utente che non è una cosa banale potete immaginare però funziona esattamente così per cui quando un utente non vedente o ipovedente accede a una finestra che magari non riesce a vedere chiaramente la finestra viene descritta con queste proprietà qui grazie a queste funzioni qui quindi quando voi create una finestra in generale voi vi appoggiate dal fatto che poi vengono descritte in maniera completa qui e i sistemi di assistenza dell'utente possono dare a descrivere come è fatta l'interfaccia utente andando a determinare dov'è il pulsante e come funziona il pulsante perché c'è scritto che cosa fa di base quindi più o meno è questa l'idea quando andiamo a usare un sistema come Flutter che ho anche questo studio code che delle primitive di Win32 non ci fa nulla quindi questo vi dicevo questo qui è tutta un'interfaccia fatta col browser quindi tutta questa finestra qui in realtà non è composta da questa finestra vedete che non cambia mai la classe è tutto Chrome render widget host quindi agli occhi di Windows tutta questa finestra qui non ha sottocomponenti è tutta l'unica finestra infatti io passo sopra e non cambia nulla lo conosco che è fatto a suon di Win32 quindi sono tutti componenti in realtà questa è una classe notepad questo è il menu questo è edit questo è il pulsante close e questa è l'area di scorrimento ogni componente ha un valore e questo permette a un ipotente ipotente ipovedente di avere nozione di quello che sta toccando questo non accade con il sensorio contro perché qui è tutto quanto misterioso perché è tutto fatto da un altro sistema di cui Win32 non ha una visione quindi questo è l'unico problema di Flutter Electron e Chromium e così via è che per chi ha difficoltà di utilizzo del PC con Windows quelle interfacce sono completamente opache per lo più perché sono composte da una singola finestra ok perfetto basta pausa e c'è pausa trompiamo cancellato tutto quello che avete visto finora e dalla volta prossima parleremo di cose più più belle da utilizzare che va allora muitas italien