Allora, riprendiamo un po' il discorso relativo agli esempi di penetration testing che abbiamo cominciato a vedere la volta scorsa. La settimana scorsa abbiamo visto qualche esempio di come si conducono le diverse fasi della kill chain, quindi dalla ricerca dei dispositivi sulla rete locale, delle porte che hanno a disposizione attraverso l'UseBDNMap, passando poi per la ricerca di vettori d'attacco opportuni e questo l'abbiamo fatto principalmente mostrando l'utilizzo di framework già completi da questo punto di vista come metasploit e poi appunto come lanciare l'attacco e sfruttare le vulnerabilità. Come vi avevo detto l'altra volta, nel repository su Blended trovate non solo gli esempi che abbiamo discusso la volta scorsa, ma ce ne sono alcuni in più. Ok, in particolare, diciamo che della maggior parte di questi vi ho parlato la settimana scorsa. Volevo dire due parole su un paio che non ho menzionato, che sono kill chain 2 e metasploit, poi invece vi racconterò nel dettaglio un ulteriore esempio, perché riguarda alcuni vettori d'attacco che non abbiamo considerato in particolare come si monta un attacco basato su fishing. Per quanto riguarda i due esempi che vi ho citato, kill chain 2 e metasploit, questi sono piuttosto interessanti perché kill chain 2 è molto semplice, molto simile, scusate, all'esempio che vi ho raccontato la volta scorsa di tutti i processi della kill chain, dal riconoscimento delle vittime fino ad arrivare all'implementazione dell'attacco. Il nostro lì, poi dopo potete andare a vedere voi stessi i contenuti, la topologia è la solita in questo esempio, ovvero una rete virtuale creata con VirtualBox, che ha da una parte una full Kali Linux come macchina attaccante, dall'altra una Metasploitable 2 come macchina vittima, trovate i dettagli di come sono state configurate e installate queste due macchine, dopodiché trovate un mini tutorial su come utilizzare Nmap per fare scanning della rete, quindi in particolare identificare una macchina vittima e dopodiché trovate invece come cercare vulnerabilità e lanciare un attacco usando come al solito Metasploit rispetto a tre diversi servizi che sono installati sulla macchina vittima, che sono FTP, analogamente ad esempio che avevamo visto la volta scorsa, SMTP e SSH. Di tutti e tre i servizi si mostra come sfruttare un exploit di Metasploit per lanciare l'attacco e come successivamente sfruttare l'attacco per accedere al sistema remoto. Poi c'è una piccola fase di lateral movement in cui viene esplorato il file system della macchina vittima e usando hashcat in modo analogo a quello che abbiamo visto l'altra volta si fa critanalisi di un file delle password, con un'ultima divagazione su come spegnere la macchina vittima remota. Qui la cosa interessante che potete andare a vedere è soprattutto la fase di investigazione della rete, come utilizzare un'emap con i diversi parametri per investigare quali sono le macchine disponibili, quali sono i servizi aperti disponibili e le porte aperte. Dopodiché servizio per servizio ho trovato i vari passi dell'attacco basato sull'utilizzo di Metasploit. Quindi un documento analogo a keychain.pdf che avevamo visto l'altra volta. Invece quest'altro, anche questo è piuttosto interessante perché qui la configurazione di nuovo è sempre la solita, in particolare, poi andremo nei dettagli, però la cosa interessante è che una volta fatta l'analisi tramite NMAP si utilizzano diversi exploit di metasploit nei confronti di diversi servizi. Ne trovate, vedete, HTTP, FTP, DSTCC, IRC, un servizio di Java, un DBMS come MSQL, un altro come PostgreSQL e così via. Vedete, ci sono una dozzina Samba, SMTP, SSH, ci sono una dozzina abbondante di diversi, Apache, Telnet. C'è anche il caso di EternalBlue, perché dentro Metasploit c'è anche l'attacco basato su EternalBlue, che era quell'exploit su cui, se vi ricordate, si basava il WannaCry ransomware. E quindi in questo caso nella macchina vittima è installata la versione del protocollo SMB e non patchata rispetto a quel tipo di problema. Quindi potete riprodurre, andando a vedere qui, lo stesso attacco che ha permesso a WannaCry e di diffondersi per tutte le macchine Windows che non avevano la patch di questo tipo di exploit. Qui la configurazione è la solita, la macchina attaccante è una Kali, la macchina vittima è una Metasploitable, dove ci sono tutti i servizi vulnerabili, anche al lato web, e poi trovate appunto il tutorial sul framework Metasploit e come usarlo in tutti i vari scenari. Tra l'altro uno dei vettori d'attacco che Metasploit mette a disposizione e che non abbiamo discusso l'altra volta, ma che vi mostrerò oggi in un altro esempio, è Meterpreter, che è una sorta di exploit che consente, una volta avuto accesso alla macchina remota, consente di creare una VPN tra la macchina remota e la macchina attaccante, attraverso la quale poi effettuare tutte le operazioni che vogliamo. Quindi lo scopo di Metasploit è fondamentalmente aprire una shell remota privata che parte dalla macchina vittima che è stata agganciata attraverso un altro vettore d'attacco e la macchina attaccante. Tra l'altro una comunicazione criptata, per cui non è nemmeno a quel punto identificabile. Anche qui trovate come è stato configurato il laboratorio usando VirtualBox, con tutti i parametri di configurazione, la tipologia di rete. Siccome Metasploit, vi ho fatto vedere dall'indice, viene usato rispetto a tante diverse vulnerabilità di tanti protocolli, di tante applicazioni, sia in ambito Linux che in ambito Windows, nella rete virtuale vedete che ci sono addirittura tre macchine vittima con tre sistemi operativi diversi. Quindi una macchina Linux con Metasploitable 2, come dicevamo prima, e due macchine Windows, un XP e una Windows 7. Ad esempio per testare le vulnerabilità contro il protocollo SMB, Apache Tomcat e Samba e non mi ricordo cosa altro. Comunque ci sono diverse macchine vittime dove provare a eseguire diversi attacchi di Metasploit, che Metasploit mette a disposizione. La mappatura della rete al solito viene fatta attraverso Nmap, quindi anche qui trovate una descrizione di come utilizzare Nmap per avere un feedback ad esempio di questo tipo qua su una delle diverse macchine vittima, quindi trovare l'elenco delle porte aperte, dei servizi disponibili, in modo tale poi da localizzare i vari servizi su tutte le macchine, addirittura si possono avere delle informazioni a diversi livelli di dettaglio sulle macchine vittima che sono individuate, che trovate vari risultati, anche come identificare il firewall, perché su una delle macchine è montato un firewall, e poi trovate capitolo per capitolo i vari casi d'uso, quindi come usare il Metasploit per trovare un exploit adatto e come lanciarlo in maniera analoga come abbiamo visto poi l'altra volta. Insomma, i comandi sono sempre grossomodo gli stessi, si individua l'exploit, eventualmente configurano i parametri che dovessero mancare e poi si lancia l'attacco. E se ne vedono gli effetti, e qui trovate, vedete le varie schermate di cosa succede, ad esempio in questo caso, fino a quando l'effetto del lancio dell'exploit è una scella aperta, remota, sulla macchina vittima. Poi in qualche caso più avanti trovate anche modalità per proseguire l'attacco, un po' come negli altri due casi di uso di cui vi ho parlato, con qualche esempio di lateral, di lateralmente. Però questo è più completo di tutti rispetto a quelle che sono le diverse potenzialità di Metasploit. Oggi invece volevo raccontarvi un po' più nel dettaglio un altro caso d'uso di pen testing, che è questo qua. Questo ve lo racconto perché, a parte il fatto che descrive in maniera esaustiva un caso d'uso di kill chain dall'inizio alla fine, quindi dal riconoscimento fino all'inflizione del danno, e al mascheramento delle tracce. Però a parte questo, la cosa interessante è che nella fase iniziale del riconoscimento come strumento per veicolare l'attacco viene utilizzato il social engineering e in particolare viene creata una mail di phishing che poi servirà in un caso per indurre la vittima a cliccare su un sito fake. Nell'altro caso invece la mail di phishing sarà essa stessa portatrice del malware come payload, in particolare come attachment della mail stessa sotto forma di un PDF che è stato iniettato come malware usando Metasploit, perché alla fine lo strumento principale che avete a disposizione a basso costo in termini di sforzo e anche di competenze per montare e lanciare un attacco è quasi sempre Metasploit. È lo strumento più importante che Cali mette a disposizione da questo punto di vista. Ora, vediamo un po' in questo esempio di kill chain che cosa succede. Al solito tutto è stato condotto all'interno di una mini rete virtuale creata con VirtualBox con la solita configurazione ovvero la Cali da una parte e la macchina vittima dall'altra che è una macchina Windows e poi vedremo quali sono le peculiarità di questa macchina Windows. Dopodiché vedete che sono state implementate tutte le fasi di raccoglione. Una prima fase di raccolta delle informazioni mirata ad attuare delle tecniche di social engineering e quindi come dicevo prima realizzata attraverso un caso di phishing quindi in questo caso a differenza degli esempi che abbiamo visto prima e l'altra volta il punto non è identificare un servizio attivo su una porta aperta dalla macchina vittima ma colpire diciamo come vittima l'utente umano ok inviarmi una mini phishing e vedere poi cosa succede. Poi c'è l'exploit vero e proprio legato al phishing e poi ci sono anche le fasi successive cioè una volta penetrato il sistema per effetto dell'exploit associato al phishing poi c'è un esempio di come fare scalata di privilegi un po' di danni inflitti sulla macchina vittima e un po' di operazioni finalizzate a mantenere la persistenza dell'attacco quindi in particolare come ad esempio creare un nuovo utente che abbia certi tipi di privilegi che possa essere usato per diciamo accedere successivamente al sistema in maniera a quel punto legale visto che viene creato un'utenza ad hoc e quindi le fasi di novità rispetto ai casi che vi ho già mostrato fondamentalmente sono le prime quindi la raccolta delle informazioni il social engineering e il phishing ora la raccolta delle informazioni quindi una sorta di intelligence al contrario cioè noi abbiamo parlato di intelligence lato blue team quindi ad esempio quali sono le fonti di informazione che il blue team può utilizzare per acquisire consapevolezza dei tipi di attacco che ci sono in giro delle patch che bisogna adottare via dicendo quindi vari siti e quant'altro ma questo tipo di approccio lo può seguire anche il red team quindi raccogliere informazioni per avere maggiori probabilità di successo di montare un attacco di phishing credibile ok raccogliere informazioni significa ad esempio imparare che un determinato utente ha un account relativo a un certo tipo di servizio o a più tipi di servizi ok questo con l'obiettivo magari di creare un'email di phishing customizzata per quella vittima una mail che faccia riferimento ai account che esistono veramente ok magari qualche tentativo goffo di phishing l'avete visto anche sulla vostra mailbox goffo perché magari erano email di phishing che facevano riferimento a dei servizi che voi non avete allora a quel punto era ovvio che si trattava di di di di di una mail fake però se vi arriva una mail da un servizio che voi avete e che contiene delle informazioni che vi riguardano allora magari in quel caso siete portati a essere meno attenti e quindi diventa più facile cadere vittima del phishing in quel caso ci sono diversi strumenti in giro che permettono di fare in maniera legale raccolta delle informazioni ok uno ve lo mostrerò tra poco questa è la configurazione della rete virtuale creata sempre con virtualbox con una delle ultime versioni della full versione full della kali la macchina vittima è una macchina windows 10 ok e sopra questa macchina windows è stata installata una versione vecchia dell'acrobat reader dell'adobi che è la 8.1.2 che come vedremo ha una vulnerabilità documentata non è che l'abbiamo trovata noi andate su fate ricerca su mitra attack o sul sito OWASP o su qualunque altro repository tra quelli di cui vi ho parlato e andate a cercare vulnerabilità di questa applicazione vi trovate l'elenco delle versioni dell'acrobat reader vecchie vulnerabili rispetto a quale tipo di vulnerabilità anche perché le stesse informazioni ce le ha metasploit e oltre ad avere queste informazioni ha anche l'exploit naturalmente già disponibile dentro quindi sapendo che esiste questa vulnerabilità è stata installata sulla macchina vittima una versione vulnerabile dell'acrobat reader e dopo vedremo in cosa consiste la vulnerabilità poi per far sì che l'attacco anche in questo caso per semplificare un po' le cose dell'esperimento per far sì che l'attacco riuscisse a essere condotto senza essere interrotto nel bel mezzo della kill chain abbiamo disabilitato da Windows il sistema di protezione in tempo reale ok perché con quello attivato certe fasi della kill chain vengono diciamo intercettate dal sistema operativo stesso che agisce come un firewall e quindi come un IDS diciamo e quindi non avrebbe permesso di completare la kill chain ok quindi con queste due accortezze abbiamo potuto sperimentare l'intera l'efficacia di tutte quante le fasi della della kill chain ora partendo dall'inizio abbiamo detto vogliamo raccogliere informazioni allora abbiamo preso un utente come target che sono io quindi io ero il target dell'attacco ok l'attaccante sa che io sono una dipendente dell'università di Urbino l'attaccante che cosa fa comincia a cercare informazioni in giro su internet che mi riguardano che riguardano i miei account che riguardano i miei servizi in cui sono sottoscritto chiaramente accedendo a ripositori pubblici no quindi senza dover per forza dover violare nessun tipo di database privato google google è complicato usare i motori di ricerca non sempre da esiti sperati esistono dei software fatti apposta per cercare informazioni che siano correlate tra di loro ad esempio cercare tutte le informazioni sul web che mi riguardano o che riguardano i miei account uno dei software più usati per fare ricerche sul web in tanti diversi contesti è Maltigo ok ne esistono tanti di software di questo genere di software cosiddetti di open source intelligence ok ovvero software open source disponibili gratuitamente che hanno come obiettivo quello appunto di fare intelligence quindi cercare su web informazioni sulla base di determinate chiavi di ricerca ad esempio la persona in maniera strutturata perché come vedremo poi il bello di questo tipo di software è che forniscono un report di tutto quello che trovano in maniera strutturata ok ha un'interfaccia grafica piuttosto semplice naturale da da da da interpretare e ripeto cioè è uno strumento che viene usato da diverse categorie di persone chiaramente viene usato da chi fa pen testing viene usato dagli esperti di sicurezza purtroppo viene usato dagli hacker viene usato da tutti coloro che per qualche motivo sono interessati a fare intelligence a raccogliere informazioni ad esempio avvocati giornalisti giudici i tecnici dei tribunali che devono cercare informazioni usano anche questi strumenti per per fare analisi forensi cercare sul web tutto quello che può avere a che fare con un'utenza piuttosto che un altro tipo di fonte quindi laddove c'è necessità o c'è dalla volontà a fini legali o a fini legali questo chiaramente non fa parte la finalità non fa parte del tool di fare investigazione ecco che questo è uno strumento più che ha dato viene usato anche nell'area del marketing perché trovare correlazioni per capire che che ne so faccio un esempio banale un certo tipo di utenza che accede a certi servizi attraverso questi strumenti si possono trovare delle correlazioni che mettono in evidenza il fatto che le utenze di un certo tipo che accedono a certi servizi contemporaneamente accedono anche ad altri servizi e queste sono le informazioni che in ambito di marketing possono essere molto utili perché sapere che su un sito dedicato a un certo argomento è più efficace mettere pubblicità di un certo tipo piuttosto che da un'altra parte queste sono politiche di marketing e per implementare questo tipo di strategie c'è bisogno di informazioni ma il Tigo è uno strumento che ci permette di recuperare questo genere di informazioni ora raccogliendo usando Maltigo ripeto un'interfaccia di grafica estremamente intuitiva salta fuori che l'utente del dominio uniorb.it che è il target del nostro attacco cioè io tutto questo non è vero è un esperimento salta fuori che la stessa email del dominio dell'ambito professionale la nostra vittima l'ha usata per registrarsi ad altri servizi ok ad esempio Twitter e Dropbox ok Dropbox è verosimile perché comunque Dropbox è un servizio che può essere correlato all'attività lavorativa perché è un vecchio strumento per condividere repository e file quindi diciamo un antenato di GitHub o di servizi di quel tipo lì e quindi ci sta che un utente con un account professionale usi quell'account su Dropbox così come su GitHub o su altri ok avrei potuto mettere un esempio di GitHub era altrettanto ragionevole Twitter è un po' più borderline perché di solito i social raramente sono no i profili social sono raramente sono creati con gli account professional di solito ci sono quelli privati però qui abbiamo scelto di mostrare anche gli esempi di Twitter perché era carino mostrare la media phishing nel caso di Twitter comunque l'idea l'idea è che l'obiettivo di uno strumento come Maltigo è quello di reperire informazioni relative alla vostra vittima no no identificate la vittima volete colpire il ciso dell'azienda tal dei tali ok fate intelligence su quella persona e Maltigo vi può dare come output informazioni come queste ok per cui se volete creare una mail di phishing destinata a quella persona è più probabile che abbia successo se quella mail proviene da Twitter o da Dropbox piuttosto che da banco poste quando in realtà io conto su banco poste non ce l'ho ok quindi questo è un po' l'obiettivo dell'intelligence in questo senso social engineering l'obiettivo sappiamo qual è cercare di costruire una una situazione un contesto che sia credibile dal punto di vista della della vittima ok quindi una volta trovato che io del dominio di un obiett ho usato la mia stessa emere professionale per creare un account Twitter e Dropbox allora abbiamo deciso di montare due mail di phishing una a carattere una targata Twitter e l'altra targata Dropbox perché due perché una delle due è una mail di phishing che induce la vittima a a loggarsi su un sito fake l'altra mail di phishing invece porta con sé il malware sotto forma di un pelo dall'interno di un attachment che è un PDF così vediamo due diverse tipologie di di phishing primo ostacolo da superare come creiamo la mail di phishing non è che ci mettiamo noi lì a creare il codice del php o quello che è della paginetta della grafica della mail che arriva alla vittima ci sono degli strumenti che ci permettono di confezionare mail provenienti da un certo tipo di mittente da un certo tipo di servizio uno di questi strumenti phishmailer installato sulla sulla cali e tanto per darvi un'idea qui vedete quando lanciate anche questo in modalità testuale attraverso la shell quando è scritto in python è abbastanza è un'applicazione abbastanza banale quando lanciate phishmailer avete questo vi dà la possibilità di creare dei template creare dei modelli di mail per diversi tipi di servizi non so se qui riuscite a leggere esempi dei vari tipi di servizi che phishmailer supporta però qua dentro ci sono sia Dropbox che Twitter e poi ce ne sono tanti altri Instagram Facebook Gmail PayPal c'è di tutto ok chiaramente il nostro primo intento è quello di creare una mail di phishing di cargata Dropbox ok quindi tornato un altro indietro Dropbox è l'opzione numero 9 ok quindi dobbiamo impostare un po' di informazioni per configurare per parametrizzare la mail di phishing che verrà salvata localmente vedete questo template mail.html conterrà la mail che viene che viene confezionata 9 appunto è il parametro associato a Dropbox un po' di dati il nome della vittima che sono io l'ora e la data in cui questa mail deve essere deve apparire come inviata quindi un po' di informazioni giorno mese anno un'opzione relativa al browser di riferimento quindi un po' di parametri di configurazione poi adesso torneremo su alcuni dettagli che qui ho tralasciato come ad esempio l'url perché l'intento come dicevo prima è creare una mail di phishing che contenga un link ad un sito fake ok e poi come vi farò vedere tra poco in realtà il il sito fake è ospitato all'interno della macchina Kali ok l'intento è indurre la vittima a cliccare su un link pensando di collegarsi a Dropbox in realtà cliccando su un link invece di collegarsi a Dropbox si collegherà su un sito ospitato sulla macchina attaccante sì sì sì no cioè no in realtà la cosa è molto semplice perché come parametro voi impostate l'url del sito fake ok e lì dovreste mettere dovreste mettere l'IP della macchina della Kali che ospita il sito il hash il pass all'interno della macchina o comunque se la macchina Kali ha un suo nome di dominio dovreste mettere quello col suo percorso insomma dovreste mettere l'indirizzo della macchina Kali con il riferimento al sito che ospita sarebbe sospettoso no vedere in una mail piuttosto che leggere dropbox.com slash qualcos'altro leggere 192 appunto 168 bla bla bla slash Kali system slash html slash phishing dropbox allora lì se ne accorge chiunque no allora l'idea qual è l'idea è sostituire l'indirizzo reale con un alias ci sono dei servizi online che lo fanno gratis non so se avete mai visto gli indirizzi ridotti i tiny url che sono una propria posta a questo creare un alias piccolo come come la stringa di un indirizzo magari lungo ok allora l'idea qual è l'idea è che noi creeremo attraverso un servizio pubblico un alias dell'indirizzo del server web sulla Kali e poi nella mail di phishing andremo a mettere l'alias questo indirizzo che vedete qua con il class scritto enter your phishing url questo è l'indirizzo che phishmail inserirà nella mail di phishing come link qui vedete un https e poi un codice questo lo avremmo creato noi prima a priori dopo vi faccio vedere questo come avviene questo per aumentare le probabilità che chi apre la mail va a cliccare sul link non si sospettisce ok quindi sistemati tutti i vari parametri di configurazione l'html dell'email viene creato dopo ve lo faccio vedere ok quindi customizzato rispetto all'utente e questo è il risultato dell'html che è stato generato quindi phishmail di genere una roba di questo tipo qua quindi il mio nome il messaggio che dice questo al template tipico di dropbox il messaggio che dice vabbè al solito un nuovo browser ha avuto accesso al tuo account sei stato tu oppure no clicca qui sì o no e qui il tema è che cliccando su uno qualunque di due pulsanti poi si viene reindirizzati a quell'URL che è direttamente collegato con la pagina web ospitata sulla macchina attaccante ok quindi questo la costruzione della mail quindi abbastanza semplice perché in realtà bisogna solamente indicare all'applicazione a phishmail quali sono i dati per customizzarla e questa è l'idea e questa è la pagina ospitata sulla macchina Kali che è la classica pagina di login ok e questa è la classica pagina di login di di dropbox quindi appunto l'idea è che quando io ricevo questa mail vado a cliccare qua poi visito vengo reindirizzato su questa pagina che chiaramente non è quella di dropbox ma è quella ospitata dalla macchina dalla macchina Kali in questo percorso qua e e e quindi qui poi a questo punto gli obiettivi possono essere diversi naturalmente uno può essere semplicemente quello di indurre l'utente a inserire le proprie credenziali molto banalmente noi non ci fermiamo a questo non ci fermiamo perché in realtà quello che vogliamo fare è una volta che l'utente si collega a questa pagina locale montare un attacco che consenta di creare un collegamento ponte tra la Kali e la macchina vittima per poi penetrare la macchina vittima l'idea di usare in questo caso lo strumento che è stato usato si chiama BIF ok e anche questo anche questo caso è uno strumento che fa tutto da solo non bisogna fare assolutamente nulla di di particolare se non se non configurarlo bisogna semplicemente impostare dove questo strumento si mette in ascolto sulla macchina attaccante ok quello che vedete qua è l'IP della macchina Kali quindi la macchina che ospita questo strumento che fa parte di Metasploit e che ospita il sito su cui si collega la vittima del phishing bisogna decidere una porta ok e tutto quello che fa poi questo strumento è quando un utente visita il sito sulla macchina attaccante utilizzando la porta specificata qua BIF crea la connessione ponte con la vittima in maniera trasparente questo è quello che questo è quello che succede chiaramente la la pagina locale che sarà questa qua questa sulla destra no questa questa questo è il codice di questa pagina qui che è quella su cui io accedo nel momento in cui io accedo a questa pagina seguendo il link dalla mail di phishing la pagina vedete c'è l'attivazione di uno steppettino ok che è quello creato da BIF e ripeto l'unica cosa che BIF deve sapere è gli indissipi della macchina attaccante quella che ospita la pagina fake di login e la specifica della porta che userà la 3000 dopodichè fa tutto lui quindi nel momento in cui io da remoto sono approdato sulla pagina di login fake della macchina attaccante viene attivato lo script e l'effetto di questo script è che BIF monta una una connessione trasparente la vittima non è consapevole dalla macchina attaccante che io ho appena visitato alla macchina vittima ok dopodichè una volta che io ho quella connessione aperta vedremo un po' più avanti di sopra ci si può fare quello che uno vuole si può visitare si può navigare all'interno del free system della macchina vittima si può fare tutto quello che tutto quello che volete questo è un po' è l'idea una delle cose che può fare poi ve lo faccio vedere alla fine monitorare tutto quello che succede all'alto browser della macchina vittima ok quindi tutte le attività che il browser svolge BIF le monitora questo no non funziona se dipende dal browser non funziona sempre non funziona sempre se sul browser sono attivi degli strumenti di antivirus cds cosa di vostra generale allora probabilmente non funziona se non sono attivi strumenti di nessun genere qualunque browser può essere attaccato in questa maniera qua fondamentalmente tornando indietro a come preparare la mail di phishing qui vedete come ad esempio si può creare una versione tiny del vostro url della della della pagina di login fake infatti vedete qui non si legge vediamo se si legge no vedete questo è in giallo è l'indirizzo reale questo è l'IP della Cali 192 168 50 43 è l'indirizzo IP della Cali progetto home dropbox è il pass che ospita la pagina di login fake che abbiamo visto prima e attraverso questo servizio c'è soltanto questo è questo è un momento che abbiamo scelto tiny url voi gli date l'indirizzo reale lui ti crea lui ti crea l'alias e quindi nell' all'interno della mail di phishing questo questo è l'html questo sotto è l'html della mail vedete che c'è il il link all'indirizzo tiny ok quindi quando voi col mouse vi spostate sul bottone vi appare il link vi appare questo e non vi appare quello reale ok questo per mascherare diciamo fino a un certo punto la la il reale indirizzo della macchina vittima della macchina del del sito che state per andare a visitare ci sono degli strumenti di difesa che fanno controlli su situazioni di questo genere perché è chiaro che basta poco per verificare che si viene indirizzati verso un sito che è diverso rispetto a quello previsto quindi se fosse attivo uno strumento di detection probabilmente una mail di questo genere non verrebbe bloccato no la mail diciamo il tentativo di seguire un certo link verrebbe bloccato è sempre una questione di avere le protezioni attive beh no questa è HTTPS questa è HTTPS quindi ah beh no cioè si è mascherata mascherata come HTTPS no localmente non lo è si anche anche in quel caso lì si si assolutamente si si so e si si anche quel tipo di controllo che fa parte del di detection poi l'altra qual è l'altro problema l'altro problema è il mettente della mail l'altro problema per riuscire a ingannare la vittima è non solo mascherare i link che uno aprende la mail potrebbe seguire l'altro problema della mail di phishing è mascherare anche il mettente no perché se io vedo che una mail che sembra arrivare da da dropbox guarda il mettente è tutt'altro non è dropbox ma è hacker chiocce la gmail punto com allora la cosa chiaramente è destinata a fallire ok quindi bisogna mascherare anche il mettente anche questa è un'operazione che si può fare usando un servizio di spoofing dell'email quindi usando un relay in questo caso un relay smtp perché stiamo parlando di relay della mail quindi un servizio di relay che non fa vedere al destinatario il mettente originale ma gli fa vedere un chiamiamolo un mettente intermedio che agli occhi del destinatario è colui che ha creato inviato la mail ok ok by changing the coding of the characters ok ok come si fa ad usare un servizio di questo genere il comando send email in cui voi mettete le dovete avere un account sul servizio di relay ok ad esempio vogliamo sia questo è un servizio di relay dovete avere un account qui sopra quindi dovete specificare le vostre credenziali quindi il vostro account su questo servizio di relay ok queste prime due informazioni qui sulla sinistra che vedete mascherate dovete specificare il servizio di relay quindi in questo caso smtp relay .sendingblue .com la porta è la 587 dovete specificare chi è il fake mit sender quindi il mettente che volete che appaia al destinatario in questo caso abbiamo scelto no reply chioccio da dropbox .com che magari non è l'email originale che usa dropbox magari ci assomiglia magari cambia un trattino con un punto o comunque ci sono delle differenze minimali che tipicamente l'utente non nota ok perché in questo caso no reply chioccio dropbox .com è verosimile io non è che posso ricordarmi tutte le email corrette di tutti i servizi a cui sono connesso quindi questo è abbastanza realistico poi bisogna ripostare l'email del destinatario la vittima e è ciò che è fatto qui questi email che vedete qui non è la mia perché altrimenti l'attacco sarebbe diventato reale arrivava arrivava sulla mia casella di posta e anzi probabilmente sarebbe stato intercettato dai servizi di ct che magari aprivano un ticket per cercare di capire da dove arrivava e quindi avremmo avuto dei problemi e quindi che cosa abbiamo fatto invece di usare un mio indirizzo email abbiamo creato un'email temporanea di quelle usegetta e l'abbiamo usata come mail vittima quindi sì sì sì sì sì sì sì sì sì ok poi qua c'è l'oggetto della mail quindi un po' di metadati e chiaramente il corpo della mail che è il nostro file dropoutspishing.html che aveva generato fishmail che abbiamo visto prima ok quindi dove si trova nella macchina locale il il pacchetto l'html della mail a inviare quindi con questo servizio in pratica noi stiamo confezionando una mail che a lato destinatario risulterà come proveniente da questo indirizzo no replay che è il nostro odio post.com ok questo è l'effetto questo è il mascheramento quindi abbiamo fatto due tipi di mascheramento uno sul link usando tiny url e l'altro sul sul mittente usando un servizio di relay quindi la macchina target sulla macchina sulla mail box della macchina target scusate dell'e-mail vittima che è questo questo indirizzo qua ok che vi ripeto è un'e-mail che abbiamo creato su non mi ricordo dove comunque vabbè un'e-mail che abbiamo che abbiamo creato mi sembra di aver scritto da dove l'avessimo tirato fuori vabbè non c'è non mi ricordo questo è l'inbox no vedete mittente non replay che ho c'è la dropbox punto com l'oggetto e il corpo è esattamente la la la mail che avevamo creato con fishmailer ok quindi abbiamo usato tre servizi fondamentalmente fish fishmailer per confezionare l'html questo qua sulla destra tinyurl per iniettare qua dentro un alias del del link alla pagina locale della Cali che contiene la pagina fake di login e infine il nostro servizio di relay per mostrare al destinatario un mittente diverso rispetto a quello rispetto a quello originale ok quindi la la vittima a cui arriva questa mail qui a colpo d'occhio non c'è nulla che che possano sospettire diciamo che ci vuole un po' di educazione no da parte del di chi apre una mail di questo genere per sospettare che che possa non essere eh legittima però diciamo che a colpo d'occhio non c'è assolutamente niente di niente di strano no quindi quello che succede ripeto è che nel momento in cui io clicco sul link presente nell'html della mail vengo reindirizzato su questa pagina di login fake che io ho localmente sulla sulla sulla macchina kali questa non l'abbiamo creata noi ma l'abbiamo trovata su github questo questo è l'indirizzo su github dove dove in realtà abbiamo trovato diverse pagine di login di diversi tipi di servizi quindi ci siamo scaricati una che era lì che è questa già già confessionata ok e l'altra unica cosa che abbiamo fatto è stato sempre sulla kali lanciare biff dice dandogli come parametri l'indirizzo di questa pagina e la porta scelta per creare la connessione abbiamo usato la porta 3000 una porta qualunque che non fosse già occupata ok quindi l'effetto qual è non l'abbiamo fatto altro l'effetto di queste operazioni è che quando la vittima apre la mail clicca a terra qui sopra questa pagina qui automaticamente biff si attiva e comincia a dialogare col browser remoto e poi vi farò vedere cosa si può fare esatto in that case the goal was not sniffing login and password just landing to the page is more than enough for biff to activate the connection with the robot browser just visiting the page because biff is listening to connection from remote to the page and it's more than enough even even if you open the page and nothing else without typing anything that would be another example of attack you type your credentials and then you leave the credential and stop heaven will thunder CLI there余 5 e we see we going to you as hard as we do as we do we and we see the 5 in this this vedete al solito metto i vari parametri, entro username Alessandro Aldini che è quello che comparirà qua, account Alessandro Aldini, perché? Perché Maltigo mi ha detto che il mio nickname su Twitter è Alessandro Aldini e non è Alessandro.aldini o qualcos'altro, quindi qui vado a mettere lo username che apparirà qua, in base alle informazioni che Maltigo mi ha fornito, altre informazioni che più o meno appariranno qua dentro, ad esempio, che ne so, vedete il device, la location, queste cose qua, anche qui metteremo l'url modificato, quindi agiamo esattamente come abbiamo fatto prima. e quindi se operiamo nella stessa identica maniera, usando lo stesso tipo di soluzione, quindi usando anche in questo caso il servizio di Renei, alla stessa vittima di prima, vedete arriverà un'altra mail, questa volta da info-twitter.comAhio è che sotto as spam yeah it may happen again it depends on the kind of checks that the server conducts locally and that's the reason why you should activate any kind of check to help you to filter all the potential phishing emails and then in this case you can act exactly as before compared to the previous but we add something more or we add an attachment to the mail ok so if we do everything as before it changes nulla e va bene però in questo caso aggiungiamo un attachment ok quindi quando configuriamo send email prima i parametri erano i soliti come nell'altro esempio tente destinatario oggetto il file contenente l'html della mail in questo secondo caso lo vedete qui c'è un parametro in più ok c'è un parametro in più la mail è un po' diversa adesso non abbiamo usato twitter in questo caso come come come cavallo di troia non abbiamo usato twitter ma abbiamo confezionato dopo ve la farò vedere una mail che apparentemente proviene dal rettore visto che io lavoro qua quindi confezioniamo una mail di phishing proveniente dal rettore e vedete qui la configurazione dopo ve la faccio vedere qui vedete i mail come è stato configurato per il servizio di relay al solito va bene l'account del mio account sul servizio di send in blu di relay il fake emittente fake che il rettore che ho se non mi dico punto it e mail della vittima la mia solita mail della vittima l'oggetto dichiarazione bonus 200 euro per ingolosire un po la vittima ad aprire la mail il corpo in questo caso del messaggio è salve messaggio dice una roba del tipo per avere il buono di 100 euro sulla busta paghera prossimo mese devi scaricare il file allegato compilarlo e inviarlo ok dopodiché c'è un attaccio che è questo auto certificazione bonus 200 punto pdf no quindi vedete il servizio di relay sono configurato opportunamente lo potete usare anche per confezionare la mail che porti degli attaccio ok dobbiamo capire come come come confessionare attaccio ok in modo tale che porti come payload malware e quindi chiederemo aiuto a a metasploit da questo punto di vista ok quindi dobbiamo immaginare che il pdf che indichiamo qui sia già stato confezionato da metasploit dopodiché con servizi di relay mandiamo la mail alla vittima proveniente dal fake mittente in questo caso soggetto e oggetto non dobbiamo neanche usare no soggetto e corpo della mail non dobbiamo nemmeno usare un html e l'attachment ok ora come facciamo a confezionare il pdf con il malware allora l'idea come dicevamo all'inizio quella di sfruttare una vulnerabilità del l'acrobat reader per windows per la versione di windows che era la versione 8.1 per windows 7 e cosa facciamo? come al solito apriamo apriamo metasploit comando msf console come sempre e gli chiediamo di cercare exploit relativi ad adobe relativi agli pdf ad adobe qui il risultato è un elenco di una dozzina abbondante di exploit relativi a svariate vulnerabilità e noi usiamo la numero 7 perché è eccellente scegliamo sempre un exploit con una valutazione piuttosto piuttosto alta che si chiama adobe pdf embedded exe che è un exploit che consente di sfruttare una vulnerabilità della versione 8 e qualcosa dell'adobe e poi vi racconterò qui vedete possiamo chiedere una volta che una volta che una volta che gli ho detto di usare la numero 7 vedete che è cambiato il prompt per ammettere customizzato rispetto all'exploit chiede informazioni mi racconta un po di informazioni relativi alla vulnerabilità rispetto a quali sistemi funziona più quelli che sono i diversi parametri le diverse opzioni che come ben sappiamo possiamo anche modificare come abbiamo visto settimana scorsa questo exploit in particolare adobe pdf embedded exe in cosa in cosa consiste voi sapete che se non lo sapete va bene cosa banale il river dell'adobe nel momento in cui apre gestisce un pdf è in grado di eseguire i contenuti del pdf anche quelli che comportano l'esecuzione di determinate azioni ci possono essere dei contenuti attivi all'interno del pdf e se non ci sono implementate opportune procedure di sanificazione nel momento in cui si va a leggere il contenuto del pdf all'interno del pdf potrebbe esserci un payload che contiene l'esecuzione di un comando associato a un codice che è iniettato dentro il pdf il reader nel leggere quel comando di fatto lo esegue e quindi esegue il malware che ha iniettato l'interno del pdf questo è un po questo è un po l'idea di quello che di quello che succede è un attacco di tipo injection alla fine per cui come lo si risolve non si risolve se l'adobe quando va a leggere un contenuto del pdf fa sanificazione di quello che legge in modo tale che non abbia dei formati strani diversi rispetto a quelli che sono i contenuti standard di un pdf nella versione 8 questo controllo di sanificazione non era implementato correttamente e quindi c'era questo tipo di di vulnerabilità per cui se iniettando un malware all'interno del pdf posizionando il comando per lanciare quel malware in un punto preciso del leader del pdf l'obiettato qual era che la dobbina e l'aprire il pdf per leggero implicitamente leggeva quindi lanciava il malware che veniva eseguito sulla macchina locale con che privilegi di accesso gli stessi della dell'applicazione river complexe o come si chiama della dog né più né meno quindi un classico esempio di common injection ok questa vulnerabilità è documentata presente nella versione 8.1 che è quella che abbiamo installato sulla macchina vittima quindi sicuramente la vittima soffra di questo tipo di vulnerabilità ok quindi tornando a metasploit abbiamo detto di usare l'exploit numero numero 7 le opzioni le abbiamo viste prima la maggior parte sono sono già configurate ok diciamo che che cosa abbiamo dovuto settare a l'host abbiamo dovuto settare l'ip della macchina attaccante perché perché lo dobbiamo impostare perché nel momento in cui il lato vittima viene eseguito il malware l'obiettivo del malware è quello di aprire una connessione con l'attaccante la remoto e quindi ha bisogno di sapere chi è l'ip dell'attaccante ok e anche quale porta e infatti qua abbiamo impostato l'ip della macchina cali che è il solito la porta su cui la macchina cali si mette in ascolto per cui l'idea qual è l'idea anche quando lato vittima la persona apre il pdf si innesca il malware e questo malware che cosa fa crea una connessione con la macchina impostata qua cioè la nostra cali e nel momento in cui si crea questa connessione io ho una scela aperta remota la macchina sulla macchina vittima un'altra un altro parametro che abbiamo settato naturalmente è il il paz del pdf dove iniettare il malware gli dobbiamo dare un pdf e lui inietta il malware lì dentro il paz e nome tutto qua quindi alcuni ripeto alcuni parametri vanno impostati ma sto realizzando l'attacco ed è esattamente tutto quello che abbiamo dovuto fare niente di più e quindi il risultato è il pdf iniettato col malware e sto ok questo attacco sfrutta in parte poi l'utilizzo di quel penale di cui vi parlavo all'inizio della versione metterpreter che cosa fa crea crea una vpn tra macchina attaccante macchina vittima che quindi non sia neanche rilevabile perché identificabile perché avviene tutti la cati tps quindi l'idea l'idea l'idea è che uso il malware che l'exploit di metasploit inietta dentro il pdf per attivare una connessione dalla macchina vittima alla nostra macchina cali secondo le modalità stabilite da metterpreter che da quel momento in avanti prende in mano la situazione e gestisce e gestisce la connessione remota qui vediamo la configurazione di metterpreter più o meno gli stessi dati di prima che l'indirizzo della cali e e vedete anche qui stesso ip stessa porta e nel momento in cui viene lanciato il exploit ecco che chiaramente nel momento in cui dall'altra parte è stato aperto il pdf si crea la connessione https ok questo è quello che vede la macchina vittima arriva la mail da rettori che accoglioni urbiti con un allegato il testo del messaggio che è quello che avevamo preparato quindi vi scaricate il pd da vittima si scarica il pdf non succede niente il malware si attiva quando il pdf viene aperto con l'adobe quindi vi ritrovate il pdf nel file system locale nel momento in cui aprite il pdf visto che sulla macchina vittima sulla macchina attaccante abbiamo lanciato metterpreter ok ok non appena dall'altra parte viene aperto il pdf si crea immediatamente la vpn https ok quindi qui è stato lanciato il metterpreter si aspetta non appena la macchina vittima apre il pdf il pdf si crea automaticamente la connessione fa tutto lui da solo il prompt qui metterpreter è di fatto una shell aperta sulla macchina remota quindi potete navigare all'interno di questa shell sulla macchina remota ok quindi qui ad esempio vedete la configurazione del sistema della macchina remota il suo contenuto e da lì in avanti adesso vedremo come eventualmente continuare l'attacco ok quindi la combinazione qual è stata? è stata di chiedere a Metasploit di confezionare un pdf repackaged con un malware tale per cui non appena non appena il pdf viene aperto il malware interroga la macchina attaccante ok sulla macchina attaccante nel frattempo abbiamo avviato l'interpreter che è un altro malware che crea la VPN in HTTPS ok e per cui non appena il malware a lato vittima è stato attivato interrogando la macchina attaccante l'interpreter monta la VPN ok e quindi si apre la shell sul sistema vittima remoto e cosa abbiamo fatto di sopra oltre che curiosare del file system abbiamo provato ad aumentare il livello dei privilegi perché? perché la shell che viene aperta viene aperta con gli stessi livelli di privilegi che aveva l'applicazione che ha aperto il malware quindi quella dell'Adobe quindi abbiamo usato get system per provare ad acquisire i privilegi da admin non ha funzionato e quindi cosa abbiamo fatto? abbiamo usato di nuovo metasploit per cercare un exploit in cui l'obiettivo fosse quello di elevare i privilegi sulla sessione che è aperta quindi cosa abbiamo fatto? questa è la shell questa che vedete qua su è la shell aperta attualmente con la macchina remota tramite l'interpreter quindi get system abbiamo visto che non ha dato nessun risultato abbiamo messo la sessione in background ok e poi abbiamo interrogato di nuovo metasploit abbiamo interrogato metasploit chiedendogli di cercare un exploit per bypassare il controllo degli accessi degli utenti ok allora abbiamo guardato su mitra attack quali sono gli exploit di questo tipo la parola chiave è bypass UAC bypass user access control e quindi metasploit ci ha sparato fuori anche in questo caso una dosia di diversi exploit che si possono usare per sfruttare vulnerabilità del sistema remoto per elevare i privilegi della vostra sessione aperta ok ne abbiamo trovato uno che si chiamava lui hijack che era il numero 12 di questa lista queste sono le informazioni dell'exploit in cosa consiste questo exploit sfrutta una vulnerabilità di Windows di Windows 10 che praticamente consente di eseguire qui dice una copia di un eseguibile di sistema che ha i privilegi che vi interessano che però si è alterata ok quindi iniettata con i comandi che che che vi interessa quindi in questo caso la l'eseguibile di sistema che ha privilegi elevati si chiama slui.exe è uno dei tanti eseguibili di sistema di Windows 10 l'exploit consiste nel creare una copia di questo file modificata ok e di eseguire quindi codice desiderato con gli stessi privilegi di accesso che ha questo eseguibile qua sono dentro i dettagli però il punto è un po' è questo qui trovate la configurazione dei parametri di questo exploit che come al solito ha alcuni i soliti i soliti parametri da impostare la porta l'indirizzo in questo caso anche la la sessione che è già attiva e dopodiché si lancia si lancia l'exploit ed ecco che riappare la nostra sessione con i privilegi aumentati quindi in questo caso la fatica l'ha fatta metasploit da questo punto di vista di realizzare l'attacco e qua vedete il risultato finale alla fine vedete QMI e vedete che adesso l'utente non è più quello di prima ma è l'utente di sistema e quindi questo ci ha permesso di navigare un po' per tutto il file system della macchina vittima e abbiamo fatto un po' di danni quindi siamo andati a scaricare file sensibili scaricare o cancellare file sensibili abbiamo provato a lanciare un po' di comandi per vedere se riuscivamo a mantenere il monitoring sulla macchina vittima ad esempio il metterpreter mette a disposizione un comando che è quel keyscan start che è abbastanza carino perché è un comando che permette di catturare e poi di salvare il locale tutto quello che digita l'utente sulla macchina vittima quindi dal momento in cui voi fate start poi c'è il comando di dump e vi fa vedere cosa è stato digitato dal lato della macchina vittima e poi vi stoppate quando volete smettere di monitorare e quindi questo è un modo per fare no? sbiffing di tutto quello che scrive ad esempio se l'utente è sulla macchina vittima digita una password quella viene sdiffata esattamente come viene digitata sulla tastiera perché qui va a intercettare non il contenuto che viene visualizzato al browser che magari è mascherato ma direttamente ciò che viene arriva dalla tastiera ok e c'è un qualcosa di analogo che si chiama screen share sempre su metterpreter che permette di condividere sulla macchina attaccante lo schermo della macchina vittima quindi non solo catturare lo standard input ma di catturare anche lo standard output ok poi per la persistenza abbiamo creato un nuovo utente aggiungendolo al gruppo degli amministratori di sistema e aggiungendolo al gruppo degli utenti che hanno il permesso di accendere accedere alla macchina vittima da remoto questo per avere una backdoor permanente sulla macchina sulla macchina vittima qui è dove abbiamo creato il nuovo utente e siamo riuscito a inserirlo nel gruppo degli amministratori ok abbiamo provato a inserirlo nel gruppo del degli utenti che hanno il permesso di accedere da remoto ma questo gruppo non esisteva ok e quindi apparentemente sulla macchina remota nessun utente poteva avere il diritto di accedere da remoto solo localmente quindi eravamo fregati quindi non era utile creare un nuovo utente se poi quest'utente non poteva collegarsi da remoto e allora che cosa abbiamo fatto abbiamo creato visto che avevamo i permessi di admin perché il nostro utente faceva parte degli amministratori abbiamo creato ex nuovo un gruppo di utenti che avesse il permesso di accesso da remoto e abbiamo messo il nostro utente nuovo dentro quel gruppo ok questo è quello che succede qua ok abbiamo abilitato il remote desktop e quindi questo ha permesso di che venisse creato questo gruppo di utenti particolare e non abbiamo fatto altro che aggiungere il nostro utente al nuovo al nuovo gruppo quindi da questo momento in avanti anche se noi chiudiamo metasploit interrompiamo la sessione HTTPS con la macchina vittima in ogni caso attraverso quest'utente che ci siamo creati abbiamo possibilità di bypassare ogni forma di controllo perché abbiamo un utente che ha un ruolo di admin e permesso di accedere da remoto per cui se sulla macchina vittima chi fa la configurazione non va a controllare periodicamente lo stato delle utenze e non si accorge che c'è questo utente qua diciamo che la backdoor rimane questo è quello che questo è quello che succede e queste sono le caratteristiche di quest'utente che abbiamo che abbiamo inserito e poi abbiamo provato ad aprire la sessione da remoto e questa cosa ha funzionato quindi da quei momenti in avanti ecco che avevamo la possibilità di aprire una scia remota sulla macchina l'ultima per continuare poi a fare sniffing nel tempo in maniera magari in maniera possibile quindi questo è il racconto di tutte le fasi della keychain da quando abbiamo iniziato facendo raccolta delle informazioni a fini di social engineering e passando per la confezione della mail di phishing che avesse diversi modi di portarsi dietro un payload malware che permettessero di offrirci un gancio verso verso la macchina remota verso la macchina vittima gancio che da quel momento usando un meterpreter si può sfruttare per creare una sessione protetta in HTTPS e fare tutto quello che vogliamo in particolare privilege escalation lateral movement e di fatto siamo arrivati a possedere tutti i diritti sulla macchina remota tutto questo non sarebbe stato possibile se sulla macchina remota fosse stato attivo fin dall'inizio il meccanismo di protezione di realtà di Windows ok quello che noi abbiamo disabilitato ok quindi questo ci dimostra una volta di più che se ci sono dei meccanismi di protezione a disposizione bisogna usarli tutti no perché magari non sono ognuno ognuno di per sé non è completo ma ognuno magari fornisce quello strumento in grado di bloccare anche solo una delle fasi della kill chain e quindi non permettere all'attaccante di completare di completare l'attacco e l'altra cosa è il discorso che abbiamo già fatto in passato mantenere sempre tutte le applicazioni aggiornate all'ultimo patch perché nella grande maggioranza dei casi ogni volta che esce una patch dentro un qualche cosa legato alla sicurezza c'è quasi sempre lasciate perdere le patch legate alla user experience o alle performance quelle le potete trascurare servono solo per appesantire di solito le applicazioni ma le patch che contengono degli aggiornamenti di sicurezza invece quelle sono fondamentali e qui ne abbiamo visto un esempio ma anche tutti gli altri fondamentalmente si tratta di attacchi condotti sfruttando degli exploit già noti che si basano su vulnerabilità già note e già risolte ok non abbiamo affrontato in nessun caso gli attacchi di tipo zero day però direi che nella stragrande maggioranza dei casi per essere robusti rispetto a tentativi di intrusion è sufficiente avere questo genere di accortezza insomma questo è un po' l'idea ecco bene domande? comunque i documenti che anche quelli che vi ho solamente scorsi in maniera rapida sono tutti su Blended quindi con calma ve li potete guardare potete trarre ispirazioni e se avete in mente il desiderio di che ne so testare una certa vulnerabilità seguendo l'approccio che abbiamo visto un po' in tutti gli esempi quindi dalla creazione della LAN virtuale macchine attaccate cali macchina vittima del caso e potete sfruttare metasploit ad esempio per testare l'attacco che vi interessa poi potete fare cose un pochino più sofisticate questo è un esempio più sofisticato degli altri perché tira in ballo metasploit tira in ballo in un caso tira in ballo beef oltre che fishmaler per il discorso legato al fishing nell'ultimo esempio tira in ballo diverse exploit di metasploit quello legato all'adobe metterpreter quindi la combinazione di diversi exploit queste sono tutte evoluzioni situazioni un pochino più complesse tutti gli altri esempi che sono presenti all'interno dei documenti che ho citato all'inizio della lezione invece sono casi puntuali di chain standard dove c'è un solo exploit che viene sfruttato e poi magari in seguito si fa altro lateral movement o escalation però è una kill chain diciamo di fatte di operazioni semplici composte in una di tra l'altra potete trarre ispirazione che ne so da qualche attacco documentato che vi è capitato di leggere e vedere di riprodurlo ad esempio questo può essere un'idea perché se si tratta di attacchi noti 9 su 10 trovate già l'exploit sull'ultima versione di metasploit quindi ripeto a meno che vogliate provare uno zero day in tutti gli altri casi trovate già gli aggiornamenti quindi si tratta semplicemente di provare a lanciare ecco questo qua bene per oggi è tutto noi ci vediamo domani questa qui devo controllare se c'era qualcos'altro che volevo raccontarvi però sì è probabile che sia finita questa parte di attivare il testing di attivare il test di attivare il test di attivare il test di attivare il test per attivare i attivare il test Grazie.